<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Azure series V: App services - GitOps</title>
<meta name="description" content="Serie de artigos sobre Microsoft Azure.">


  <meta name="author" content="Jose Castillo Lema">
  
  <meta property="article:author" content="Jose Castillo Lema">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="GitOps">
<meta property="og:title" content="Azure series V: App services">
<meta property="og:url" content="https://josecastillolema.github.io/azure5-app/">


  <meta property="og:description" content="Serie de artigos sobre Microsoft Azure.">



  <meta property="og:image" content="https://josecastillolema.github.io/assets/images/favicon_io/android-chrome-512x512.png">





  <meta property="article:published_time" content="2021-03-09T00:00:00-06:00">



  <meta property="article:modified_time" content="2021-03-09T00:00:00-06:00">




<link rel="canonical" href="https://josecastillolema.github.io/azure5-app/">







  <meta name="google-site-verification" content="googled48a6d8a28aaa375.html" />






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="GitOps Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="shortcut icon" type="image/png" href="/assets/images/favicon.ico">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/favicon_io/android-chrome-192x192.png" alt="GitOps"></a>
        
        <a class="site-title" href="/">
          GitOps
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/series/"
                
                
              >series</a>
            </li><li class="masthead__menu-item">
              <a
                href="/classes/"
                
                
              >classes</a>
            </li><li class="masthead__menu-item">
              <a
                href="/talks/"
                
                
              >talks</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >about</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <script lang="javascript" src="/assets/js/vanilla-back-to-top.min.js"></script>
    <script>addBackToTop({
      backgroundColor: '#6F777D',
      textColor: '#fff'
    })</script>

    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://josecastillolema.github.io/">
        <img src="/assets/images/me.jpg" alt="Jose Castillo Lema" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://josecastillolema.github.io/" itemprop="url">Jose Castillo Lema</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Software Engineer @ <strong>RedHat</strong></p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">Santiago, Spain</span>
        </li>
      

      
        
          
            <li><a href="https://github.com/josecastillolema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/jose-castillo-lema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
            <li><a href="https://www.youracclaim.com/users/jose-castillo-lema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-angle-double-up" aria-hidden="true"></i><span class="label">Acclaim</span></a></li>
          
        
          
            <li><a href="https://stackoverflow.com/users/4288758/jos%c3%a9-castillo-lema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">StackOverflow</span></a></li>
          
        
          
            <li><a href="https://www.researchgate.net/profile/Jose_Castillo-Lema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-researchgate" aria-hidden="true"></i><span class="label">ResearchGate</span></a></li>
          
        
          
            <li><a href="https://scholar.google.com.br/citations?user=_xNpHiwAAAAJ" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-google" aria-hidden="true"></i><span class="label">GoogleScholar</span></a></li>
          
        
          
            <li><a href="https://www.opennetworking.org/ambassadors/jose-castillo-lema/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-battle-net" aria-hidden="true"></i><span class="label">ONF</span></a></li>
          
        
          
            <li><a href="https://www.youtube.com/channel/UCm5egt_lHxJX-VQdkLPszog/playlists" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-youtube-square" aria-hidden="true"></i><span class="label">YouTube</span></a></li>
          
        
          
            <li><a href="https://josecastillolema.github.io/feed.xml" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i><span class="label">RSS</span></a></li>
          
        
          
            <li><a href="mailto:josecastillolema@gmail.com" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Azure series V: App services">
    <meta itemprop="description" content="Serie de artigos sobre Microsoft Azure.">
    <meta itemprop="datePublished" content="2021-03-09T00:00:00-06:00">
    <meta itemprop="dateModified" content="2021-03-09T00:00:00-06:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://josecastillolema.github.io/azure5-app/" itemprop="url">Azure series V: App services
</a>
          </h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          10 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#lab-5---app-service-plans">Lab 5 - App Service Plans</a><ul><li><a href="#pre-reqs">Pre-reqs</a></li><li><a href="#deploy-em-uma-vm">Deploy em uma VM</a></li><li><a href="#criaçao-do-serviço-na-azure">Criaçao do serviço na Azure</a></li><li><a href="#configuraçao-do-repositório-git">Configuraçao do repositório git</a></li><li><a href="#deploy-da-aplicaçao">Deploy da aplicaçao</a></li><li><a href="#logging-e-monitoramento">Logging e monitoramento</a></li><li><a href="#deployment-slots">Deployment slots</a></li></ul></li></ul>
            </nav>
          </aside>
        
        <p><a href="/series/#azure">Serie de artigos</a> sobre Microsoft Azure.</p>

<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&amp;repo=fiap&amp;type=watch&amp;count=true&amp;size=large&amp;v=2" frameborder="0" scrolling="0" width="132" height="30" title="GitHub"></iframe>
<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&amp;repo=fiap&amp;type=star&amp;count=true&amp;size=large" frameborder="0" scrolling="0" width="130" height="30" title="GitHub"></iframe>
<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&amp;repo=fiap&amp;type=fork&amp;count=true&amp;size=large" frameborder="0" scrolling="0" width="170" height="30" title="GitHub"></iframe>

<h1 id="lab-5---app-service-plans">Lab 5 - App Service Plans</h1>

<p>Em este lab sobre <strong>App Service Plans</strong> aprenderemos alguns conceitos importantes da camada de plataforma da Azure:</p>
<ul>
  <li><em>Deploy</em> de aplicações</li>
  <li>Plataformas/entornos de execução disponíveis</li>
  <li><em>Logging</em></li>
  <li>Monitoramento</li>
  <li>Estratégias de <em>release</em>
    <ul>
      <li>Blue-Green</li>
      <li>Canary</li>
    </ul>
  </li>
</ul>

<h2 id="pre-reqs">Pre-reqs</h2>

<ul>
  <li>Uma VM com a imagem <code class="language-plaintext highlighter-rouge">Ubuntu Linux 18.04</code></li>
  <li><code class="language-plaintext highlighter-rouge">git</code></li>
  <li><code class="language-plaintext highlighter-rouge">python3</code></li>
  <li><code class="language-plaintext highlighter-rouge">pip3</code></li>
</ul>

<h2 id="deploy-em-uma-vm"><em>Deploy</em> em uma VM</h2>

<ol>
  <li>
    <p>Criar uma VM com a imagem <code class="language-plaintext highlighter-rouge">Ubuntu 18.04</code></p>
  </li>
  <li>
    <p>Logar na VM</p>
  </li>
  <li>Atualizar os repositorios:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ sudo apt update
</code></pre></div>    </div>
  </li>
  <li>Instalar o pip3 (gestor de pacotes do python3):
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ sudo apt install python3-pip -y
</code></pre></div>    </div>
  </li>
  <li>Clonar o repositório:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git clone https://github.com/josecastillolema/fiap
</code></pre></div>    </div>
  </li>
  <li>Navegar ate o diretorio <code class="language-plaintext highlighter-rouge">fiap/net/devops/lab05-paas-app</code>. O diretorio contem os <a href="https://github.com/josecastillolema/fiap/tree/master/net/devops/lab05-paas-app">seguintes arquivos</a>:
    <ul>
      <li><a href="https://github.com/josecastillolema/fiap/blob/master/net/devops/lab05-paas-app/application.py"><strong><code class="language-plaintext highlighter-rouge">application.py</code></strong></a>: Um serviço web escrito em Python que usa a biblioteca <a href="https://flask.palletsprojects.com/en/1.1.x/">Flask</a>.</li>
      <li><a href="https://github.com/josecastillolema/fiap/blob/master/net/devops/lab05-paas-app/requirements.txt"><strong><code class="language-plaintext highlighter-rouge">requirements.txt</code></strong></a>: As dependências da aplicação. Podem ser instaladas usando <code class="language-plaintext highlighter-rouge">pip</code>, o gestor de dependências do Python.</li>
    </ul>
  </li>
  <li>Instalar as dependências:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ sudo pip3 install -r requirements.txt
</code></pre></div>    </div>
  </li>
  <li>Executar a aplicação:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ FLASK_APP=./application.py FLASK_RUN_HOST=0.0.0.0 flask run &amp;
  Serving Flask app "./application.py"
  Environment: production
    WARNING: Do not use the development server in a production environment.
    Use a production WSGI server instead.
  Debug mode: off
  Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)
</code></pre></div>    </div>
  </li>
  <li>Testar o acesso local:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ curl localhost:5000
 &lt;h1&gt;Hola FIAP!&lt;/h1&gt;
 MBA! o/
</code></pre></div>    </div>
  </li>
  <li>
    <p>Testar o acesso remoto pela IP pública da VM (lembrando que é necessária a liberacão da porta 5000 no <em>security group</em> da VM):</p>

    <p><img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app01.png" alt="" /></p>
  </li>
</ol>

<h2 id="criaçao-do-serviço-na-azure">Criaçao do serviço na Azure</h2>

<ol>
  <li>
    <p>Acessar o serviço <strong>Web Application</strong>:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app02.png" alt="" /></p>
  </li>
  <li>Criar uma nova <em>web application</em>.
    <ul>
      <li>Runtime: <code class="language-plaintext highlighter-rouge">Python 3.6</code></li>
      <li>SKU: <code class="language-plaintext highlighter-rouge">S1</code> ou algum outro SKU que tenha permissão para usar <em>deployment slots</em>
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app03.png" alt="" /></li>
    </ul>
  </li>
  <li>
    <p>Revisar a configuração do serviço:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app04.png" alt="" /></p>
  </li>
  <li>
    <p>Aguardar a criação do serviço:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app05.png" alt="" /></p>
  </li>
  <li>
    <p>Acessar a URL do serviço criado:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app06.png" alt="" /></p>
  </li>
  <li>Foi desplegado automaticamente um site de teste:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app07.png" alt="" /></li>
</ol>

<h2 id="configuraçao-do-repositório-git">Configuraçao do repositório <code class="language-plaintext highlighter-rouge">git</code></h2>

<p>Criaremos um repositório <code class="language-plaintext highlighter-rouge">git</code> local para automatizar o <em>deploy</em> da aplicação.</p>

<ol>
  <li>
    <p>No <em>Deployment center</em>, na aba de configuraçao criar um repositório git local:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app08.png" alt="" /></p>
  </li>
  <li>
    <p>Na aba de credenciais configurar um usuário e senha para poder clonar o repositório:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app09.png" alt="" /></p>
  </li>
</ol>

<h2 id="deploy-da-aplicaçao">Deploy da aplicaçao</h2>

<p><strong>De volta na VM</strong></p>

<ol>
  <li>Clonar o repositório local criado nos passos anteriores (copiar a URI do repositorio git local no passo anterior) usando as credencias recém criadas:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ git clone https://fiap-app.scm.azurewebsites.net:443/fiap.git
 Cloning into 'fiap-app'...
 Username for 'https://fiap.scm.azurewebsites.net:443': jlema
 Password for 'https://jlema@fiap.scm.azurewebsites.net:443': 
 warning: You appear to have cloned an empty repository.
</code></pre></div>    </div>
  </li>
  <li>Copiar os 2 arquivos:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cp fiap/net/devops/lab05-paas-app/* fiap-app
    
$ ls fiap-app
application.py  requirements.txt
</code></pre></div>    </div>
  </li>
  <li>Comittar os novos arquivos no repositorio git local da app:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd fiap-app
    
$ git status
On branch master

No commits yet

Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)

 application.py
 requirements.txt

nothing added to commit but untracked files present (use "git add" to track)
    
$ git add *
    
$ git commit -m "v1"
[master (root-commit) a64c6ae] v1
 Committer: Ubuntu &lt;jose@joselito.qzy1ejut0yhe3jyjrxopscm2pe.bx.internal.cloudapp.net&gt;
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly. Run the
following command and follow the instructions in your editor to edit
your configuration file:

    git config --global --edit

After doing this, you may fix the identity used for this commit with:

    git commit --amend --reset-author

 2 files changed, 13 insertions(+)
 create mode 100644 application.py
 create mode 100644 requirements.txt
     
$ git push origin master
Username for 'https://fiap.scm.azurewebsites.net:443': jlema
Password for 'https://jlema@fiap.scm.azurewebsites.net:443': 
Counting objects: 4, done.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 487 bytes | 487.00 KiB/s, done.
Total 4 (delta 0), reused 0 (delta 0)
remote: Deploy Async
remote: Updating branch 'master'.
remote: Updating submodules.
remote: Preparing deployment for commit id 'a64c6ae136'.
remote: Repository path is /home/site/repository
remote: Running oryx build...
remote: Operation performed by Microsoft Oryx, https://github.com/Microsoft/Oryx
remote: You can report issues at https://github.com/Microsoft/Oryx/issues
remote: 
remote: Oryx Version: 0.2.20210120.1, Commit: 66c7820d7df527aaffabd2563a49ad57930999c9, ReleaseTagName: 20210120.1
remote: 
remote: Build Operation ID: |Me5qumZrHLs=.51783a9b_
remote: Repository Commit : a64c6ae136e87b9f9a83de6e1aa81a8145f997e5
remote: 
remote: Detecting platforms...
remote: Detected following platforms:
remote:   python: 3.6.12
remote: Warning: An outdated version of python was detected (3.6.12). Consider updating.\nVersions supported by Oryx: https://github.com/microsoft/Oryx
remote: 
remote: 
remote: Using intermediate directory '/tmp/8d8e34659c81cee'.
remote: 
remote: Copying files to the intermediate directory...
remote: Done in 0 sec(s).
remote: 
remote: Source directory     : /tmp/8d8e34659c81cee
remote: Destination directory: /home/site/wwwroot
remote: 
remote: Python Version: /opt/python/3.6.12/bin/python3.6
remote: Python Virtual Environment: antenv3.6
remote: Creating virtual environment...
remote: ......
remote: Activating virtual environment...
remote: Running pip install...
remote: [21:58:00+0000] Collecting click==6.7 (from -r requirements.txt (line 1))
remote: [21:58:01+0000]   Downloading https://files.pythonhosted.org/packages/34/c1/8806f99713ddb993c5366c362b2f908f18269f8d792aff1abfd700775a77/click-6.7-py2.py3-none-any.whl (71kB)
remote: [21:58:01+0000] Collecting Flask==1.0.2 (from -r requirements.txt (line 2))
remote: [21:58:01+0000]   Downloading https://files.pythonhosted.org/packages/7f/e7/08578774ed4536d3242b14dacb4696386634607af824ea997202cd0edb4b/Flask-1.0.2-py2.py3-none-any.whl (91kB)
remote: [21:58:02+0000] Collecting itsdangerous==0.24 (from -r requirements.txt (line 3))
remote: [21:58:02+0000]   Downloading https://files.pythonhosted.org/packages/dc/b4/a60bcdba945c00f6d608d8975131ab3f25b22f2bcfe1dab221165194b2d4/itsdangerous-0.24.tar.gz (46kB)
remote: [21:58:03+0000] Collecting Jinja2&gt;=2.10.1 (from -r requirements.txt (line 4))
remote: [21:58:03+0000]   Downloading https://files.pythonhosted.org/packages/7e/c2/1eece8c95ddbc9b1aeb64f5783a9e07a286de42191b7204d67b7496ddf35/Jinja2-2.11.3-py2.py3-none-any.whl (125kB)
remote: [21:58:03+0000] Collecting MarkupSafe==1.0 (from -r requirements.txt (line 5))
remote: [21:58:03+0000]   Downloading https://files.pythonhosted.org/packages/4d/de/32d741db316d8fdb7680822dd37001ef7a448255de9699ab4bfcbdf4172b/MarkupSafe-1.0.tar.gz
remote: [21:58:04+0000] Collecting Werkzeug&gt;=0.15.3 (from -r requirements.txt (line 6))
remote: [21:58:04+0000]   Downloading https://files.pythonhosted.org/packages/cc/94/5f7079a0e00bd6863ef8f1da638721e9da21e5bacee597595b318f71d62e/Werkzeug-1.0.1-py2.py3-none-any.whl (298kB)
remote: [21:58:04+0000] Building wheels for collected packages: itsdangerous, MarkupSafe
remote: [21:58:04+0000]   Running setup.py bdist_wheel for itsdangerous: started
remote: [21:58:06+0000]   Running setup.py bdist_wheel for itsdangerous: finished with status 'done'
remote: [21:58:06+0000]   Stored in directory: /usr/local/share/pip-cache/wheels/2c/4a/61/5599631c1554768c6290b08c02c72d7317910374ca602ff1e5
remote: [21:58:06+0000]   Running setup.py bdist_wheel for MarkupSafe: started
remote: [21:58:09+0000]   Running setup.py bdist_wheel for MarkupSafe: finished with status 'done'
remote: [21:58:09+0000]   Stored in directory: /usr/local/share/pip-cache/wheels/33/56/20/ebe49a5c612fffe1c5a632146b16596f9e64676768661e4e46
remote: [21:58:09+0000] Successfully built itsdangerous MarkupSafe
remote: [21:58:10+0000] Installing collected packages: click, itsdangerous, MarkupSafe, Jinja2, Werkzeug, Flas
remote: [21:58:11+0000] Successfully installed Flask-1.0.2 Jinja2-2.11.3 MarkupSafe-1.0 Werkzeug-1.0.1 click-6.7 itsdangerous-0.24
remote: You are using pip version 18.1, however version 21.0.1 is available.
remote: You should consider upgrading via the 'pip install --upgrade pip' command.
remote: 
remote: Compressing existing 'antenv3.6' folder...
remote: Done in 3 sec(s).
remote: Preparing output...
remote: 
remote: Copying files to destination directory '/home/site/wwwroot'...
remote: Done in 0 sec(s).
remote: 
remote: Removing existing manifest file
remote: Creating a manifest file...
remote: Manifest file created.
remote: 
remote: Done in 26 sec(s).
remote: Running post deployment command(s)...
remote: Triggering recycle (preview mode disabled).
remote: Deployment successful.
remote: Deployment Logs : 'https://fiap.scm.azurewebsites.net/newui/jsonviewer?view_url=/api/deployments/a64c6ae136e87b9f9a83de6e1aa81a8145f997e5/log'
To https://fiap.scm.azurewebsites.net:443/fiap.git
 * [new branch]      master -&gt; master
</code></pre></div>    </div>
  </li>
  <li>Confirmar que o deploy ocorreu com sucesso:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app10.png" alt="" /></li>
</ol>

<h2 id="logging-e-monitoramento"><em>Logging</em> e monitoramento</h2>

<ol>
  <li>
    <p>Na descrição da aplicaçao podemos consultar algumas métricas básicas:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app11.png" alt="" /></p>
  </li>
  <li>
    <p>Para fazer <em>troubleshooting</em> da aplicação, se o endereço da mesma for https://fiap.azurewebsites.net/, acessar https://fiap.scm.azurewebsites.net/:
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app12.png" alt="" /></p>
  </li>
</ol>

<h2 id="deployment-slots">Deployment slots</h2>

<p>Para implementar algums estratégias de <em>release</em> (blue-green e canary) usaremos <em>deployment slots</em>:</p>

<ol>
  <li>
    <p>Criar um novo <em>slot</em> para o ambiente de homolgação:
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app13.png" alt="" /></p>
  </li>
  <li>
    <p>Confirmar a URL do <em>slot</em> de homologação. Se o endereço da app for https://fiap.azurewebsites.net/, o endereço do ambiente de homologação será https://fiap-homol.azurewebsites.net/
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app14.png" alt="" /></p>
  </li>
  <li>
    <p>Acessar o endereço de homologação e confirmar que Azure fez deploy da aplicação de teste:
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app15.png" alt="" /></p>
  </li>
  <li>
    <p>Para fazer <strong>blue-green</strong>, escolher a opçao <strong><em>Swap</em></strong> (Intercambiar):
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app16.png" alt="" /></p>
  </li>
  <li>
    <p>Para fazer o <strong>canary release</strong>, ajustar as porcentagens conforme desejado (usar <em>browsers</em> diferentes para testar):
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/net/devops/img/app17.png" alt="" /></p>
  </li>
</ol>

<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&amp;type=follow&amp;count=true&amp;size=large" frameborder="0" scrolling="0" width="230" height="30" title="GitHub"></iframe>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#azure" class="page__taxonomy-item p-category" rel="tag">azure</a><span class="sep">, </span>
    
      <a href="/tags/#classes" class="page__taxonomy-item p-category" rel="tag">classes</a><span class="sep">, </span>
    
      <a href="/tags/#dev" class="page__taxonomy-item p-category" rel="tag">dev</a><span class="sep">, </span>
    
      <a href="/tags/#fiap" class="page__taxonomy-item p-category" rel="tag">fiap</a><span class="sep">, </span>
    
      <a href="/tags/#pt" class="page__taxonomy-item p-category" rel="tag">pt</a><span class="sep">, </span>
    
      <a href="/tags/#series" class="page__taxonomy-item p-category" rel="tag">series</a>
    
    </span>
  </p>




        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2021-03-09">March 9, 2021</time></p>

      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=Azure+series+V%3A+App+services%20https%3A%2F%2Fjosecastillolema.github.io%2Fazure5-app%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fjosecastillolema.github.io%2Fazure5-app%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://josecastillolema.github.io/azure5-app/" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/azure4-blob/" class="pagination--pager" title="Azure series IV: Blob storage
">Previous</a>
    
    
      <a href="/shift-aws-foundations-3/" class="pagination--pager" title="FIAP SHIFT: AWS Academy Cloud Foundations - 3rd edition
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Comments</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You May Also Enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/favicon_io/android-chrome-512x512.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/physics-rhr-blog/" rel="permalink">Unleashing the potential of Function as a Service in the cloud continuum
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">

</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/favicon_io/android-chrome-512x512.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/dnfa6/" rel="permalink">Management orchestrator for a Content-Centric Network in a 6G network
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Management orchestrator for a Content-Centric Network in a 6G network

</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/favicon_io/android-chrome-512x512.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/rh-summit24/" rel="permalink">Red Hat Summit 2024
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">

</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/favicon_io/android-chrome-512x512.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/lf-nephio/" rel="permalink">Introduction to Nephio (LSF179)
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">

</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/josecastillolema" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/jose-castillo-lema" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
        
          <li><a href="https://stackoverflow.com/users/4288758/jos%c3%a9-castillo-lema" rel="nofollow noopener noreferrer"><i class="fab fa-stack-overflow" aria-hidden="true"></i> Stack Overflow</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 <a href="https://josecastillolema.github.io">GitOps</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-169326084-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://josecastillolema.github.io/azure5-app/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/azure5-app"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://https-josecastillolema-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
