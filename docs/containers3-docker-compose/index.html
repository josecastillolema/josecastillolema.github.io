<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Containers series III: Docker Compose - GitOps</title>
<meta name="description" content="Serie de artigos sobre containers (Docker, Docker Compose, Docker Swarm e Kubernetes).">


  <meta name="author" content="Jose Castillo Lema">
  
  <meta property="article:author" content="Jose Castillo Lema">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="GitOps">
<meta property="og:title" content="Containers series III: Docker Compose">
<meta property="og:url" content="https://josecastillolema.github.io/containers3-docker-compose/">


  <meta property="og:description" content="Serie de artigos sobre containers (Docker, Docker Compose, Docker Swarm e Kubernetes).">



  <meta property="og:image" content="https://josecastillolema.github.io/assets/images/favicon_io/android-chrome-512x512.png">





  <meta property="article:published_time" content="2019-01-29T00:00:00-06:00">



  <meta property="article:modified_time" content="2019-01-29T14:00:58-06:00">




<link rel="canonical" href="https://josecastillolema.github.io/containers3-docker-compose/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://josecastillolema.github.io/",
      "sameAs": ["https://www.linkedin.com/in/jose-castillo-lema","https://github.com/josecastillolema","https://stackoverflow.com/users/4288758/jos%c3%a9-castillo-lema","https://www.researchgate.net/profile/Jose_Castillo-Lema","https://scholar.google.com.br/citations?user=_xNpHiwAAAAJ","http://lattes.cnpq.br/7955703023492257","https://www.opennetworking.org/ambassadors/jose-castillo-lema/"]
    
  }
</script>


  <meta name="google-site-verification" content="googled48a6d8a28aaa375.html" />






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="GitOps Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="shortcut icon" type="image/png" href="/assets/images/favicon.ico">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/favicon_io/android-chrome-192x192.png" alt="GitOps"></a>
        
        <a class="site-title" href="/">
          GitOps
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/series/">series</a>
            </li><li class="masthead__menu-item">
              <a href="/classes/">classes</a>
            </li><li class="masthead__menu-item">
              <a href="/mininfv/">mini-nfv</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">tags</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">about</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <script lang="javascript" src="/assets/js/vanilla-back-to-top.min.js"></script>
    <script>addBackToTop({
      backgroundColor: '#6F777D',
      textColor: '#fff'
    })</script>

    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://josecastillolema.github.io/">
        <img src="/assets/images/me.jpg" alt="Jose Castillo Lema" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://josecastillolema.github.io/" itemprop="url">Jose Castillo Lema</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Software Engineer @ <strong>RedHat</strong></p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">Santiago, Spain</span>
        </li>
      

      
        
          
            <li><a href="https://github.com/josecastillolema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/jose-castillo-lema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
            <li><a href="https://www.youracclaim.com/users/jose-castillo-lema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-angle-double-up" aria-hidden="true"></i><span class="label">Acclaim</span></a></li>
          
        
          
            <li><a href="https://stackoverflow.com/users/4288758/jos%c3%a9-castillo-lema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">StackOverflow</span></a></li>
          
        
          
            <li><a href="https://www.researchgate.net/profile/Jose_Castillo-Lema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-researchgate" aria-hidden="true"></i><span class="label">ResearchGate</span></a></li>
          
        
          
            <li><a href="https://scholar.google.com.br/citations?user=_xNpHiwAAAAJ" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-google" aria-hidden="true"></i><span class="label">GoogleScholar</span></a></li>
          
        
          
            <li><a href="https://www.opennetworking.org/ambassadors/jose-castillo-lema/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-battle-net" aria-hidden="true"></i><span class="label">ONF</span></a></li>
          
        
          
            <li><a href="https://www.youtube.com/channel/UCm5egt_lHxJX-VQdkLPszog/playlists" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-youtube-square" aria-hidden="true"></i><span class="label">YouTube</span></a></li>
          
        
          
            <li><a href="https://josecastillolema.github.io/feed.xml" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i><span class="label">RSS</span></a></li>
          
        
          
            <li><a href="mailto:josecastillolema@gmail.com" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Containers series III: Docker Compose">
    <meta itemprop="description" content="Serie de artigos sobre containers (Docker, Docker Compose, Docker Swarm e Kubernetes).">
    <meta itemprop="datePublished" content="2019-01-29T00:00:00-06:00">
    <meta itemprop="dateModified" content="2019-01-29T14:00:58-06:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="https://josecastillolema.github.io/containers3-docker-compose/" class="u-url" itemprop="url">Containers series III: Docker Compose
</a>
          </h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          29 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#lab-3---docker-compose">Lab 3 - Docker Compose</a><ul><li><a href="#executando-servicos">Executando servicos</a><ul><li><a href="#instalação">Instalação</a></li><li><a href="#uso">Uso</a></li><li><a href="#validação">Validação</a></li><li><a href="#clean-up">Clean-up</a></li></ul></li></ul></li></ul>

            </nav>
          </aside>
        
        <p><a href="/series/#containers">Serie de artigos</a> sobre containers (Docker, Docker Compose, Docker Swarm e Kubernetes).</p>

<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&amp;repo=fiap&amp;type=watch&amp;count=true&amp;size=large&amp;v=2" frameborder="0" scrolling="0" width="132" height="30" title="GitHub"></iframe>
<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&amp;repo=fiap&amp;type=star&amp;count=true&amp;size=large" frameborder="0" scrolling="0" width="130" height="30" title="GitHub"></iframe>
<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&amp;repo=fiap&amp;type=fork&amp;count=true&amp;size=large" frameborder="0" scrolling="0" width="170" height="30" title="GitHub"></iframe>

<h1 id="lab-3---docker-compose">Lab 3 - Docker Compose</h1>

<h2 id="executando-servicos">Executando servicos</h2>
<p><a href="https://docs.docker.com/compose/">Docker Compose</a> permite definir serviços (que a sua vez são formados por containers) e a comunicação entre os mesmos. Esta comunicação é implementada via DNS nos containers. Além disso, no arquivo de configuração do Docker Compose (<strong><em>docker-compose.yml</em></strong>) é possível definir:</p>
<ul>
  <li><strong>variáveis de entorno</strong>: comando <code class="language-plaintext highlighter-rouge">environment</code></li>
  <li><strong>mapeamento de portas</strong>: comando <code class="language-plaintext highlighter-rouge">ports</code></li>
  <li><strong>persistência de dados</strong>: comando <code class="language-plaintext highlighter-rouge">volumes</code></li>
  <li><strong>dependências entre os serviços</strong>: comandos <code class="language-plaintext highlighter-rouge">links</code> e <code class="language-plaintext highlighter-rouge">depends on</code></li>
</ul>

<p>Vamos trabalhar com dois terminais abertos (<strong>T1</strong> e <strong>T2</strong>).</p>

<h3 id="instalação">Instalação</h3>

<ol>
  <li>
    <p><strong>[T1]</strong> Instalação do Docker Compose:</p>

    <p>[<strong>Ubuntu</strong>]</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ sudo apt  install docker-compose -y
 Reading package lists... Done
 Building dependency tree       
 Reading state information... Done
 The following additional packages will be installed:
   golang-docker-credential-helpers libpython-stdlib libpython2.7-minimal libpython2.7-stdlib libsecret-1-0
   libsecret-common python python-asn1crypto python-backports.ssl-match-hostname python-cached-property python-certifi
   python-cffi-backend python-chardet python-cryptography python-docker python-dockerpty python-dockerpycreds
   python-docopt python-enum34 python-funcsigs python-functools32 python-idna python-ipaddress python-jsonschema
   python-minimal python-mock python-openssl python-pbr python-pkg-resources python-requests python-six
   python-texttable python-urllib3 python-websocket python-yaml python2.7 python2.7-minimal
 Suggested packages:
   python-doc python-tk python-cryptography-doc python-cryptography-vectors python-enum34-doc python-funcsigs-doc
   python-mock-doc python-openssl-doc python-openssl-dbg python-setuptools python-socks python-ntlm python2.7-doc
   binutils binfmt-support
 The following NEW packages will be installed:
   docker-compose golang-docker-credential-helpers libpython-stdlib libpython2.7-minimal libpython2.7-stdlib
   libsecret-1-0 libsecret-common python python-asn1crypto python-backports.ssl-match-hostname python-cached-property
   python-certifi python-cffi-backend python-chardet python-cryptography python-docker python-dockerpty
   python-dockerpycreds python-docopt python-enum34 python-funcsigs python-functools32 python-idna python-ipaddress
   python-jsonschema python-minimal python-mock python-openssl python-pbr python-pkg-resources python-requests
   python-six python-texttable python-urllib3 python-websocket python-yaml python2.7 python2.7-minimal
 0 upgraded, 38 newly installed, 0 to remove and 35 not upgraded.
 Need to get 6014 kB of archives.
 After this operation, 26.6 MB of additional disk space will be used.
 Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic-updates/main amd64 libpython2.7-minimal amd64 2.7.17-1~18.04 [335 kB]
 Get:2 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic-updates/main amd64 python2.7-minimal amd64 2.7.17-1~18.04 [1294 kB]
 Get:3 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-minimal amd64 2.7.15~rc1-1 [28.1 kB]
 Get:4 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic-updates/main amd64 libpython2.7-stdlib amd64 2.7.17-1~18.04 [1915 kB]
 Get:5 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic-updates/main amd64 python2.7 amd64 2.7.17-1~18.04 [248 kB]
 Get:6 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 libpython-stdlib amd64 2.7.15~rc1-1 [7620 B]
 Get:7 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python amd64 2.7.15~rc1-1 [140 kB]
 Get:8 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/universe amd64 python-backports.ssl-match-hostname all 3.5.0.1-1 [7024 B]
 Get:9 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-pkg-resources all 39.0.1-2 [128 kB]
 Get:10 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/universe amd64 python-cached-property all 1.3.1-1 [7568 B]
 Get:11 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-six all 1.11.0-2 [11.3 kB]
 Get:12 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 libsecret-common all 0.18.6-1 [4452 B]
 Get:13 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 libsecret-1-0 amd64 0.18.6-1 [94.6 kB]
 Get:14 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/universe amd64 golang-docker-credential-helpers amd64 0.5.0-2 [444 kB]
 Get:15 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/universe amd64 python-dockerpycreds all 0.2.1-1 [4138 B]
 Get:16 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-certifi all 2018.1.18-2 [144 kB]
 Get:17 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-chardet all 3.0.4-1 [80.3 kB]
 Get:18 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-idna all 2.6-1 [32.4 kB]
 Get:19 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic-updates/main amd64 python-urllib3 all 1.22-1ubuntu0.18.04.1 [85.9 kB]
 Get:20 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic-updates/main amd64 python-requests all 2.18.4-2ubuntu0.1 [58.5 kB]
 Get:21 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/universe amd64 python-websocket all 0.44.0-0ubuntu2 [30.7 kB]
 Get:22 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-ipaddress all 1.0.17-1 [18.2 kB]
 Get:23 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/universe amd64 python-docker all 2.5.1-1 [69.0 kB]
 Get:24 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/universe amd64 python-dockerpty all 0.4.1-1 [10.8 kB]
 Get:25 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/universe amd64 python-docopt all 0.6.2-1build1 [25.6 kB]
 Get:26 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-enum34 all 1.1.6-2 [34.8 kB]
 Get:27 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-functools32 all 3.2.3.2-3 [10.8 kB]
 Get:28 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-funcsigs all 1.0.2-4 [13.5 kB]
 Get:29 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-pbr all 3.1.1-3ubuntu3 [53.7 kB]
 Get:30 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-mock all 2.0.0-3 [47.4 kB]
 Get:31 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-jsonschema all 2.6.0-2 [31.5 kB]
 Get:32 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/universe amd64 python-texttable all 0.9.1-1 [8160 B]
 Get:33 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-yaml amd64 3.12-1build2 [115 kB]
 Get:34 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/universe amd64 docker-compose all 1.17.1-2 [76.3 kB]
 Get:35 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-asn1crypto all 0.24.0-1 [72.7 kB]
 Get:36 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-cffi-backend amd64 1.11.5-1 [63.4 kB]
 Get:37 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic-updates/main amd64 python-cryptography amd64 2.1.4-1ubuntu1.3 [221 kB]
 Get:38 http://us-east-1.ec2.archive.ubuntu.com/ubuntu bionic/main amd64 python-openssl all 17.5.0-1ubuntu1 [41.3 kB]
 Fetched 6014 kB in 0s (27.4 MB/s)         
 Extracting templates from packages: 100%
 Selecting previously unselected package libpython2.7-minimal:amd64.
 (Reading database ... 111722 files and directories currently installed.)
 Preparing to unpack .../0-libpython2.7-minimal_2.7.17-1~18.04_amd64.deb ...
 Unpacking libpython2.7-minimal:amd64 (2.7.17-1~18.04) ...
 Selecting previously unselected package python2.7-minimal.
 Preparing to unpack .../1-python2.7-minimal_2.7.17-1~18.04_amd64.deb ...
 Unpacking python2.7-minimal (2.7.17-1~18.04) ...
 Selecting previously unselected package python-minimal.
 Preparing to unpack .../2-python-minimal_2.7.15~rc1-1_amd64.deb ...
 Unpacking python-minimal (2.7.15~rc1-1) ...
 Selecting previously unselected package libpython2.7-stdlib:amd64.
 Preparing to unpack .../3-libpython2.7-stdlib_2.7.17-1~18.04_amd64.deb ...
 Unpacking libpython2.7-stdlib:amd64 (2.7.17-1~18.04) ...
 Selecting previously unselected package python2.7.
 Preparing to unpack .../4-python2.7_2.7.17-1~18.04_amd64.deb ...
 Unpacking python2.7 (2.7.17-1~18.04) ...
 Selecting previously unselected package libpython-stdlib:amd64.
 Preparing to unpack .../5-libpython-stdlib_2.7.15~rc1-1_amd64.deb ...
 Unpacking libpython-stdlib:amd64 (2.7.15~rc1-1) ...
 Setting up libpython2.7-minimal:amd64 (2.7.17-1~18.04) ...
 Setting up python2.7-minimal (2.7.17-1~18.04) ...
 Linking and byte-compiling packages for runtime python2.7...
 Setting up python-minimal (2.7.15~rc1-1) ...
 Selecting previously unselected package python.
 (Reading database ... 112470 files and directories currently installed.)
 Preparing to unpack .../00-python_2.7.15~rc1-1_amd64.deb ...
 Unpacking python (2.7.15~rc1-1) ...
 Selecting previously unselected package python-backports.ssl-match-hostname.
 Preparing to unpack .../01-python-backports.ssl-match-hostname_3.5.0.1-1_all.deb ...
 Unpacking python-backports.ssl-match-hostname (3.5.0.1-1) ...
 Selecting previously unselected package python-pkg-resources.
 Preparing to unpack .../02-python-pkg-resources_39.0.1-2_all.deb ...
 Unpacking python-pkg-resources (39.0.1-2) ...
 Selecting previously unselected package python-cached-property.
 Preparing to unpack .../03-python-cached-property_1.3.1-1_all.deb ...
 Unpacking python-cached-property (1.3.1-1) ...
 Selecting previously unselected package python-six.
 Preparing to unpack .../04-python-six_1.11.0-2_all.deb ...
 Unpacking python-six (1.11.0-2) ...
 Selecting previously unselected package libsecret-common.
 Preparing to unpack .../05-libsecret-common_0.18.6-1_all.deb ...
 Unpacking libsecret-common (0.18.6-1) ...
 Selecting previously unselected package libsecret-1-0:amd64.
 Preparing to unpack .../06-libsecret-1-0_0.18.6-1_amd64.deb ...
 Unpacking libsecret-1-0:amd64 (0.18.6-1) ...
 Selecting previously unselected package golang-docker-credential-helpers.
 Preparing to unpack .../07-golang-docker-credential-helpers_0.5.0-2_amd64.deb ...
 Unpacking golang-docker-credential-helpers (0.5.0-2) ...
 Selecting previously unselected package python-dockerpycreds.
 Preparing to unpack .../08-python-dockerpycreds_0.2.1-1_all.deb ...
 Unpacking python-dockerpycreds (0.2.1-1) ...
 Selecting previously unselected package python-certifi.
 Preparing to unpack .../09-python-certifi_2018.1.18-2_all.deb ...
 Unpacking python-certifi (2018.1.18-2) ...
 Selecting previously unselected package python-chardet.
 Preparing to unpack .../10-python-chardet_3.0.4-1_all.deb ...
 Unpacking python-chardet (3.0.4-1) ...
 Selecting previously unselected package python-idna.
 Preparing to unpack .../11-python-idna_2.6-1_all.deb ...
 Unpacking python-idna (2.6-1) ...
 Selecting previously unselected package python-urllib3.
 Preparing to unpack .../12-python-urllib3_1.22-1ubuntu0.18.04.1_all.deb ...
 Unpacking python-urllib3 (1.22-1ubuntu0.18.04.1) ...
 Selecting previously unselected package python-requests.
 Preparing to unpack .../13-python-requests_2.18.4-2ubuntu0.1_all.deb ...
 Unpacking python-requests (2.18.4-2ubuntu0.1) ...
 Selecting previously unselected package python-websocket.
 Preparing to unpack .../14-python-websocket_0.44.0-0ubuntu2_all.deb ...
 Unpacking python-websocket (0.44.0-0ubuntu2) ...
 Selecting previously unselected package python-ipaddress.
 Preparing to unpack .../15-python-ipaddress_1.0.17-1_all.deb ...
 Unpacking python-ipaddress (1.0.17-1) ...
 Selecting previously unselected package python-docker.
 Preparing to unpack .../16-python-docker_2.5.1-1_all.deb ...
 Unpacking python-docker (2.5.1-1) ...
 Selecting previously unselected package python-dockerpty.
 Preparing to unpack .../17-python-dockerpty_0.4.1-1_all.deb ...
 Unpacking python-dockerpty (0.4.1-1) ...
 Selecting previously unselected package python-docopt.
 Preparing to unpack .../18-python-docopt_0.6.2-1build1_all.deb ...
 Unpacking python-docopt (0.6.2-1build1) ...
 Selecting previously unselected package python-enum34.
 Preparing to unpack .../19-python-enum34_1.1.6-2_all.deb ...
 Unpacking python-enum34 (1.1.6-2) ...
 Selecting previously unselected package python-functools32.
 Preparing to unpack .../20-python-functools32_3.2.3.2-3_all.deb ...
 Unpacking python-functools32 (3.2.3.2-3) ...
 Selecting previously unselected package python-funcsigs.
 Preparing to unpack .../21-python-funcsigs_1.0.2-4_all.deb ...
 Unpacking python-funcsigs (1.0.2-4) ...
 Selecting previously unselected package python-pbr.
 Preparing to unpack .../22-python-pbr_3.1.1-3ubuntu3_all.deb ...
 Unpacking python-pbr (3.1.1-3ubuntu3) ...
 Selecting previously unselected package python-mock.
 Preparing to unpack .../23-python-mock_2.0.0-3_all.deb ...
 Unpacking python-mock (2.0.0-3) ...
 Selecting previously unselected package python-jsonschema.
 Preparing to unpack .../24-python-jsonschema_2.6.0-2_all.deb ...
 Unpacking python-jsonschema (2.6.0-2) ...
 Selecting previously unselected package python-texttable.
 Preparing to unpack .../25-python-texttable_0.9.1-1_all.deb ...
 Unpacking python-texttable (0.9.1-1) ...
 Selecting previously unselected package python-yaml.
 Preparing to unpack .../26-python-yaml_3.12-1build2_amd64.deb ...
 Unpacking python-yaml (3.12-1build2) ...
 Selecting previously unselected package docker-compose.
 Preparing to unpack .../27-docker-compose_1.17.1-2_all.deb ...
 Unpacking docker-compose (1.17.1-2) ...
 Selecting previously unselected package python-asn1crypto.
 Preparing to unpack .../28-python-asn1crypto_0.24.0-1_all.deb ...
 Unpacking python-asn1crypto (0.24.0-1) ...
 Selecting previously unselected package python-cffi-backend.
 Preparing to unpack .../29-python-cffi-backend_1.11.5-1_amd64.deb ...
 Unpacking python-cffi-backend (1.11.5-1) ...
 Selecting previously unselected package python-cryptography.
 Preparing to unpack .../30-python-cryptography_2.1.4-1ubuntu1.3_amd64.deb ...
 Unpacking python-cryptography (2.1.4-1ubuntu1.3) ...
 Selecting previously unselected package python-openssl.
 Preparing to unpack .../31-python-openssl_17.5.0-1ubuntu1_all.deb ...
 Unpacking python-openssl (17.5.0-1ubuntu1) ...
 Setting up libsecret-common (0.18.6-1) ...
 Setting up libsecret-1-0:amd64 (0.18.6-1) ...
 Setting up libpython2.7-stdlib:amd64 (2.7.17-1~18.04) ...
 Setting up python2.7 (2.7.17-1~18.04) ...
 Setting up libpython-stdlib:amd64 (2.7.15~rc1-1) ...
 Setting up golang-docker-credential-helpers (0.5.0-2) ...
 Setting up python (2.7.15~rc1-1) ...
 Setting up python-idna (2.6-1) ...
 Setting up python-texttable (0.9.1-1) ...
 Setting up python-functools32 (3.2.3.2-3) ...
 Setting up python-yaml (3.12-1build2) ...
 Setting up python-asn1crypto (0.24.0-1) ...
 Setting up python-certifi (2018.1.18-2) ...
 Setting up python-pkg-resources (39.0.1-2) ...
 Setting up python-backports.ssl-match-hostname (3.5.0.1-1) ...
 Setting up python-cffi-backend (1.11.5-1) ...
 Setting up python-six (1.11.0-2) ...
 Setting up python-dockerpty (0.4.1-1) ...
 Setting up python-pbr (3.1.1-3ubuntu3) ...
 update-alternatives: using /usr/bin/python2-pbr to provide /usr/bin/pbr (pbr) in auto mode
 Setting up python-enum34 (1.1.6-2) ...
 Setting up python-funcsigs (1.0.2-4) ...
 Setting up python-docopt (0.6.2-1build1) ...
 Setting up python-ipaddress (1.0.17-1) ...
 Setting up python-cached-property (1.3.1-1) ...
 Setting up python-urllib3 (1.22-1ubuntu0.18.04.1) ...
 Setting up python-chardet (3.0.4-1) ...
 Setting up python-dockerpycreds (0.2.1-1) ...
 Setting up python-mock (2.0.0-3) ...
 Setting up python-websocket (0.44.0-0ubuntu2) ...
 update-alternatives: using /usr/bin/python2-wsdump to provide /usr/bin/wsdump (wsdump) in auto mode
 Setting up python-cryptography (2.1.4-1ubuntu1.3) ...
 Setting up python-requests (2.18.4-2ubuntu0.1) ...
 Setting up python-jsonschema (2.6.0-2) ...
 update-alternatives: using /usr/bin/python2-jsonschema to provide /usr/bin/jsonschema (jsonschema) in auto mode
 Setting up python-openssl (17.5.0-1ubuntu1) ...
 Setting up python-docker (2.5.1-1) ...
 Setting up docker-compose (1.17.1-2) ...
 Processing triggers for man-db (2.8.3-2ubuntu0.1) ...
 Processing triggers for mime-support (3.60ubuntu1) ...
 Processing triggers for libc-bin (2.27-3ubuntu1) ...
</code></pre></div>    </div>

    <p>[<strong>Amazon Linux</strong>]</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ sudo curl -L https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m) -o /usr/local/bin/docker-compose
   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                  Dload  Upload   Total   Spent    Left  Speed
 100   152  100   152    0     0   4252      0 --:--:-- --:--:-- --:--:--  4342
 100   664  100   664    0     0  16586      0 --:--:-- --:--:-- --:--:-- 16586
 100 23.5M  100 23.5M    0     0  84.2M      0 --:--:-- --:--:-- --:--:-- 84.2M
    
 $ sudo chmod +x /usr/local/bin/docker-compose
 $ docker-compose version
</code></pre></div>    </div>

    <p>[<strong>Amazon Linux</strong>]
 Instalar o git:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ sudo yum install -y git
</code></pre></div>    </div>
  </li>
  <li><strong>[T1]</strong> Clonar <a href="https://github.com/josecastillolema/fiap">este repositório</a> e navegar ate a pasta <strong><code class="language-plaintext highlighter-rouge">/fiap/bdt/microservices</code></strong>:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ git clone https://github.com/josecastillolema/fiap.git
 $ cd fiap/bdt/microservices/compose
 $ pwd
 /home/ubuntu/fiap/bdt/microservices/compose
 $ ls
 api_v1  api_v2  api_v3  docker-compose.yml  mongo  mysql

</code></pre></div>    </div>
  </li>
  <li><strong>[T1]</strong> Mostrar o conteúdo do arquivo <strong><code class="language-plaintext highlighter-rouge">docker-compose.yml</code></strong>. São definidos dois serviços:
    <ul>
      <li><strong>api</strong>: a API escrita em Python, que tem dependência com (consulta) o serviço <em>mysql</em></li>
      <li><strong>mysql</strong>: o servidor MySQL, com mapeamento de portas (porta 3306), persistência de dados (pasta <code class="language-plaintext highlighter-rouge">/var/lib/mysql</code>) e algumas variáveis de entorno
        <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="s">$ cat docker-compose.yml</span> 
 <span class="s">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">2'</span>
 <span class="na">services</span><span class="pi">:</span>
<span class="na">api</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span> <span class="s">api_v2/.</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">4000:5000"</span>
  <span class="na">depends_on</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">mysql</span>
<span class="na">mysql</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span> <span class="s">mysql/.</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">3306:3306"</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/var/lib/mysql</span>
  <span class="na">environment</span><span class="pi">:</span>
     <span class="na">MYSQL_ROOT_PASSWORD</span><span class="pi">:</span> <span class="s">senhaFiap</span>
     <span class="na">MYSQL_DATABASE</span><span class="pi">:</span> <span class="s">fiapdb</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h3 id="uso">Uso</h3>

<ol>
  <li><strong>[T1]</strong> Criar os serviços definidos no arquivo <strong><code class="language-plaintext highlighter-rouge">docker-compose.yml</code></strong>:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ docker-compose up
 Creating network "compose_default" with the default driver
 Building mysql
 Step 1/3 : FROM mysql
  ---&gt; 9228ee8bac7a
 Step 2/3 : MAINTAINER Jose Castillo &lt;profjose.lema@fiap.com.br&gt;
  ---&gt; Running in 5f85965fa52d
 Removing intermediate container 5f85965fa52d
  ---&gt; 1035c57e599d
 Step 3/3 : ADD ./aso.sql /docker-entrypoint-initdb.d
  ---&gt; a809a9c5ca56
 Successfully built a809a9c5ca56
 Successfully tagged compose_mysql:latest
 WARNING: Image for service mysql was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.
 Building api
 Step 1/8 : FROM python:2
  ---&gt; 154f4db0c875
 Step 2/8 : MAINTAINER Jose Castillo &lt;profjose.lema@fiap.com.br&gt;
  ---&gt; Using cache
  ---&gt; defda7283ddf
 Step 3/8 : ADD api.py requirements.txt /
  ---&gt; abb5e8e662ca
 Step 4/8 : RUN pip install -r ./requirements.txt
  ---&gt; Running in ebd156421186
 DEPRECATION: Python 2.7 reached the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 is no longer maintained. A future version of pip will drop support for Python 2.7. More details about Python 2 support in pip, can be found at https://pip.pypa.io/en/latest/development/release-process/#python-2-support
 Collecting flask
   Downloading Flask-1.1.2-py2.py3-none-any.whl (94 kB)
 Collecting flask-mysql
   Downloading Flask_MySQL-1.5.1-py2.py3-none-any.whl (3.8 kB)
 Collecting flask-cors
   Downloading Flask_Cors-3.0.8-py2.py3-none-any.whl (14 kB)
 Collecting cryptography
   Downloading cryptography-2.9-cp27-cp27mu-manylinux2010_x86_64.whl (2.7 MB)
 Collecting click&gt;=5.1
   Downloading click-7.1.1-py2.py3-none-any.whl (82 kB)
 Collecting itsdangerous&gt;=0.24
   Downloading itsdangerous-1.1.0-py2.py3-none-any.whl (16 kB)
 Collecting Werkzeug&gt;=0.15
   Downloading Werkzeug-1.0.1-py2.py3-none-any.whl (298 kB)
 Collecting Jinja2&gt;=2.10.1
   Downloading Jinja2-2.11.1-py2.py3-none-any.whl (126 kB)
 Collecting PyMySQL
   Downloading PyMySQL-0.9.3-py2.py3-none-any.whl (47 kB)
 Requirement already satisfied: Six in /usr/local/lib/python2.7/site-packages (from flask-cors-&gt;-r ./requirements.txt (line 3)) (1.14.0)
 Collecting ipaddress; python_version &lt; "3"
   Downloading ipaddress-1.0.23-py2.py3-none-any.whl (18 kB)
 Collecting cffi!=1.11.3,&gt;=1.8
   Downloading cffi-1.14.0-cp27-cp27mu-manylinux1_x86_64.whl (387 kB)
 Collecting enum34; python_version &lt; "3"
   Downloading enum34-1.1.10-py2-none-any.whl (11 kB)
 Collecting MarkupSafe&gt;=0.23
   Downloading MarkupSafe-1.1.1-cp27-cp27mu-manylinux1_x86_64.whl (24 kB)
 Collecting pycparser
   Downloading pycparser-2.20-py2.py3-none-any.whl (112 kB)
 Installing collected packages: click, itsdangerous, Werkzeug, MarkupSafe, Jinja2, flask, PyMySQL, flask-mysql, flask-cors, ipaddress, pycparser, cffi, enum34, cryptography
 Successfully installed Jinja2-2.11.1 MarkupSafe-1.1.1 PyMySQL-0.9.3 Werkzeug-1.0.1 cffi-1.14.0 click-7.1.1 cryptography-2.9 enum34-1.1.10 flask-1.1.2 flask-cors-3.0.8 flask-mysql-1.5.1 ipaddress-1.0.23 itsdangerous-1.1.0 pycparser-2.20
 Removing intermediate container ebd156421186
  ---&gt; 1897edcddbb5
 Step 5/8 : ENV PORT=5000
  ---&gt; Running in 8dd8bb035819
 Removing intermediate container 8dd8bb035819
  ---&gt; 3b92b6fb59a5
 Step 6/8 : EXPOSE $PORT
  ---&gt; Running in 99d862666779
 Removing intermediate container 99d862666779
  ---&gt; 05c77804ed9d
 Step 7/8 : HEALTHCHECK CMD curl --fail http://localhost:$PORT || exit 1
  ---&gt; Running in ecbcbde1d83c
 Removing intermediate container ecbcbde1d83c
  ---&gt; 178843362cde
 Step 8/8 : CMD [ "./api.py" ]
  ---&gt; Running in bfe14e880a4b
 Removing intermediate container bfe14e880a4b
  ---&gt; e401dc1035d7
 Successfully built e401dc1035d7
 Successfully tagged compose_api:latest
 WARNING: Image for service api was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.
 Creating compose_mysql_1 ... 
 Creating compose_mysql_1 ... done
 Creating compose_api_1 ... 
 Creating compose_api_1 ... done
 Attaching to compose_mysql_1, compose_api_1
 mysql_1  | 2020-04-08 19:52:56+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.19-1debian10 started.
 mysql_1  | 2020-04-08 19:52:57+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'
 mysql_1  | 2020-04-08 19:52:57+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.19-1debian10 started.
 mysql_1  | 2020-04-08 19:52:57+00:00 [Note] [Entrypoint]: Initializing database files
 mysql_1  | 2020-04-08T19:52:57.639740Z 0 [Warning] [MY-011070] [Server] 'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it' is deprecated and will be removed in a future release.
 mysql_1  | 2020-04-08T19:52:57.639830Z 0 [System] [MY-013169] [Server] /usr/sbin/mysqld (mysqld 8.0.19) initializing of server in progress as process 41
 api_1    |  * Serving Flask app "api" (lazy loading)
 api_1    |  * Environment: production
 api_1    |    WARNING: This is a development server. Do not use it in a production deployment.
 api_1    |    Use a production WSGI server instead.
 api_1    |  * Debug mode: on
 api_1    |  * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)
 api_1    |  * Restarting with stat
 api_1    |  * Debugger is active!
 api_1    |  * Debugger PIN: 463-518-758
 mysql_1  | 2020-04-08T19:53:03.024229Z 5 [Warning] [MY-010453] [Server] root@localhost is created with an empty password ! Please consider switching off the --initialize-insecure option.
 mysql_1  | 2020-04-08 19:53:08+00:00 [Note] [Entrypoint]: Database files initialized
 mysql_1  | 2020-04-08 19:53:08+00:00 [Note] [Entrypoint]: Starting temporary server
 mysql_1  | 2020-04-08T19:53:08.721880Z 0 [Warning] [MY-011070] [Server] 'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it' is deprecated and will be removed in a future release.
 mysql_1  | 2020-04-08T19:53:08.722007Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.19) starting as process 91
 mysql_1  | 2020-04-08T19:53:09.446603Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed.
 mysql_1  | 2020-04-08T19:53:09.457240Z 0 [Warning] [MY-011810] [Server] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a different directory.
 mysql_1  | 2020-04-08T19:53:09.478577Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: '8.0.19'  socket: '/var/run/mysqld/mysqld.sock'  port: 0  MySQL Community Server - GPL.
 mysql_1  | 2020-04-08 19:53:09+00:00 [Note] [Entrypoint]: Temporary server started.
 mysql_1  | 2020-04-08T19:53:09.527830Z 0 [System] [MY-011323] [Server] X Plugin ready for connections. Socket: '/var/run/mysqld/mysqlx.sock'
 mysql_1  | Warning: Unable to load '/usr/share/zoneinfo/iso3166.tab' as time zone. Skipping it.
 mysql_1  | Warning: Unable to load '/usr/share/zoneinfo/leap-seconds.list' as time zone. Skipping it.
 mysql_1  | Warning: Unable to load '/usr/share/zoneinfo/zone.tab' as time zone. Skipping it.
 mysql_1  | Warning: Unable to load '/usr/share/zoneinfo/zone1970.tab' as time zone. Skipping it.
 mysql_1  | 2020-04-08 19:53:13+00:00 [Note] [Entrypoint]: Creating database fiapdb
 mysql_1  | 
 mysql_1  | 2020-04-08 19:53:13+00:00 [Note] [Entrypoint]: /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/aso.sql
 mysql_1  | 
 mysql_1  | 
 mysql_1  | 2020-04-08 19:53:14+00:00 [Note] [Entrypoint]: Stopping temporary server
 mysql_1  | 2020-04-08T19:53:14.140552Z 12 [System] [MY-013172] [Server] Received SHUTDOWN from user root. Shutting down mysqld (Version: 8.0.19).
 mysql_1  | 2020-04-08T19:53:15.777586Z 0 [System] [MY-010910] [Server] /usr/sbin/mysqld: Shutdown complete (mysqld 8.0.19)  MySQL Community Server - GPL.
 mysql_1  | 2020-04-08 19:53:16+00:00 [Note] [Entrypoint]: Temporary server stopped
 mysql_1  | 
 mysql_1  | 2020-04-08 19:53:16+00:00 [Note] [Entrypoint]: MySQL init process done. Ready for start up.
 mysql_1  | 
 mysql_1  | 2020-04-08T19:53:16.482021Z 0 [Warning] [MY-011070] [Server] 'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it' is deprecated and will be removed in a future release.
 mysql_1  | 2020-04-08T19:53:16.482148Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.19) starting as process 1
 mysql_1  | 2020-04-08T19:53:17.150498Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed.
 mysql_1  | 2020-04-08T19:53:17.159715Z 0 [Warning] [MY-011810] [Server] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a different directory.
 mysql_1  | 2020-04-08T19:53:17.180954Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: '8.0.19'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  MySQL Community Server - GPL.
 mysql_1  | 2020-04-08T19:53:17.291602Z 0 [System] [MY-011323] [Server] X Plugin ready for connections. Socket: '/var/run/mysqld/mysqlx.sock' bind-address: '::' port: 33060
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>[T1]</strong> (Opcional / Alternativa ao passo 4)</p>

    <p>O comando anterior pode ser executado com a opção <strong><code class="language-plaintext highlighter-rouge">-d</code></strong>. De esta forma os containers são executados no <em>background</em>, e não será necessário usar dois terminais. Porém, temos menos visibilidade no que está acontecendo nos containers:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ docker-compose up -d
 Creating network "compose_default" with the default driver
 Creating compose_mysql_1 ... 
 Creating compose_mysql_1 ... done
 Creating compose_api_1 ... 
 Creating compose_api_1 ... done
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="validação">Validação</h3>

<ol>
  <li><strong>[T2]</strong> Em um segundo terminal, confirmar que os serviços do Docker Compose foram criados corretamente. E necessário navegar ate pasta que contém o arquivo <strong><code class="language-plaintext highlighter-rouge">docker-compose.yml</code></strong>.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ cd fiap/bdt/microservices/compose/
 $ pwd
 /home/ubuntu/fiap/bdt/microservices/compose
 $ docker-compose ps
      Name                   Command             State                 Ports              
 -----------------------------------------------------------------------------------------
 compose_api_1     ./api.py                      Up      0.0.0.0:4000-&gt;5000/tcp           
 compose_mysql_1   docker-entrypoint.sh mysqld   Up      0.0.0.0:3306-&gt;3306/tcp, 33060/tcp
</code></pre></div>    </div>
  </li>
  <li><strong>[T2]</strong> Confirmar que os containers foram criados corretamente:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ docker ps
 CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS                               NAMES
 6d7277694bc3        compose_api         "./api.py"               2 minutes ago       Up About a minute (healthy)   0.0.0.0:4000-&gt;5000/tcp              compose_api_1
 349228f10355        compose_mysql       "docker-entrypoint.s…"   2 minutes ago       Up 2 minutes                  0.0.0.0:3306-&gt;3306/tcp, 33060/tcp   compose_mysql_1
</code></pre></div>    </div>
  </li>
  <li><strong>[T2]</strong> Testar a API:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ curl localhost:4000
 Benvido a API FIAP!
</code></pre></div>    </div>
  </li>
  <li><strong>[T2]</strong> Testar a conexão da API com o banco de dados:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ curl localhost:4000/getDados
 [{"id": 1234, "name": "Jose Castillo Lema"}]
</code></pre></div>    </div>
  </li>
  <li><strong>[T2]</strong> Conferir a configuração de DNS, usando o ID do container <em>compose_api</em> obtido no passo <strong>7</strong>:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker exec 6d7277694bc3 ping -c 3 mysql
PING mysql (172.18.0.2) 56(84) bytes of data.
64 bytes from compose_mysql_1.compose_default (172.18.0.2): icmp_seq=1 ttl=64 time=0.073 ms
64 bytes from compose_mysql_1.compose_default (172.18.0.2): icmp_seq=2 ttl=64 time=0.070 ms
64 bytes from compose_mysql_1.compose_default (172.18.0.2): icmp_seq=3 ttl=64 time=0.072 ms

--- mysql ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 35ms
rtt min/avg/max/mdev = 0.070/0.071/0.073/0.009 ms
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="clean-up"><em>Clean-up</em></h3>

<ol>
  <li><strong>[T2]</strong> Remover os serviços (e os containers):
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker-compose down
Stopping compose_api_1   ... done
Stopping compose_mysql_1 ... done
Removing compose_api_1   ... done
Removing compose_mysql_1 ... done
Removing network compose_default
</code></pre></div>    </div>
  </li>
</ol>

<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&amp;type=follow&amp;count=true&amp;size=large" frameborder="0" scrolling="0" width="230" height="30" title="GitHub"></iframe>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#classes" class="page__taxonomy-item p-category" rel="tag">classes</a><span class="sep">, </span>
    
      <a href="/tags/#fiap" class="page__taxonomy-item p-category" rel="tag">fiap</a><span class="sep">, </span>
    
      <a href="/tags/#iac" class="page__taxonomy-item p-category" rel="tag">iac</a><span class="sep">, </span>
    
      <a href="/tags/#openshift" class="page__taxonomy-item p-category" rel="tag">openshift</a><span class="sep">, </span>
    
      <a href="/tags/#pt" class="page__taxonomy-item p-category" rel="tag">pt</a><span class="sep">, </span>
    
      <a href="/tags/#redhat" class="page__taxonomy-item p-category" rel="tag">redhat</a><span class="sep">, </span>
    
      <a href="/tags/#series" class="page__taxonomy-item p-category" rel="tag">series</a>
    
    </span>
  </p>




        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2019-01-29">January 29, 2019</time></p>

      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=Containers+series+III%3A+Docker+Compose%20https%3A%2F%2Fjosecastillolema.github.io%2Fcontainers3-docker-compose%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fjosecastillolema.github.io%2Fcontainers3-docker-compose%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fjosecastillolema.github.io%2Fcontainers3-docker-compose%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/containers2-docker2/" class="pagination--pager" title="Containers series II: Docker - continuação
">Previous</a>
    
    
      <a href="/containers4-docker-swarm/" class="pagination--pager" title="Containers series IV: Docker Swarm
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Comments</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">You May Also Enjoy</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/favicon_io/android-chrome-512x512.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/physics-ga8/" rel="permalink">PHYSICS 8th General Assembly
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/favicon_io/android-chrome-512x512.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/diff-blog/" rel="permalink">diff.blog
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/favicon_io/android-chrome-512x512.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/dev-inmutable-distros/" rel="permalink">Development workflows on inmutable distros: rootless setup
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          15 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
  Continuation of Samsai notes on Toolbox-based Emacs Flatpak workflow.


</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/favicon_io/android-chrome-512x512.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/kubemark-ocp/" rel="permalink">Kubemark on OpenShift
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Kubemark is a performance testing tool which allows users to run experiments on simulated clusters, by creating “hollow” Kubernetes nodes. What this means is...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/josecastillolema" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/jose-castillo-lema" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
        
          <li><a href="https://stackoverflow.com/users/4288758/jos%c3%a9-castillo-lema" rel="nofollow noopener noreferrer"><i class="fab fa-stack-overflow" aria-hidden="true"></i> Stack Overflow</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 GitOps. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-169326084-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://josecastillolema.github.io/containers3-docker-compose/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/containers3-docker-compose"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://https-josecastillolema-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
