<!DOCTYPE html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
--><html lang="en" class="no-js">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>AWS series XII: DynamoDB - GitOps</title>
<meta name="description" content="Serie de artigos sobre Amazon Web Services.">


  <meta name="author" content="Jose Castillo Lema">
  
  <meta property="article:author" content="Jose Castillo Lema">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="GitOps">
<meta property="og:title" content="AWS series XII: DynamoDB">
<meta property="og:url" content="https://josecastillolema.github.io/aws12-dynamodb/">


  <meta property="og:description" content="Serie de artigos sobre Amazon Web Services.">



  <meta property="og:image" content="https://josecastillolema.github.io/assets/images/favicon_io/android-chrome-512x512.png">





  <meta property="article:published_time" content="2020-07-16T00:00:00-05:00">



  <meta property="article:modified_time" content="2020-07-16T00:00:00-05:00">




<link rel="canonical" href="https://josecastillolema.github.io/aws12-dynamodb/">







  <meta name="google-site-verification" content="googled48a6d8a28aaa375.html">






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="GitOps Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="shortcut icon" type="image/png" href="/assets/images/favicon.ico">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/favicon_io/android-chrome-192x192.png" alt="GitOps"></a>
        
        <a class="site-title" href="/">
          GitOps
          
        </a>
        <ul class="visible-links">
<li class="masthead__menu-item">
              <a href="/series/">series</a>
            </li>
<li class="masthead__menu-item">
              <a href="/classes/">classes</a>
            </li>
<li class="masthead__menu-item">
              <a href="/talks/">talks</a>
            </li>
<li class="masthead__menu-item">
              <a href="/tags/">tags</a>
            </li>
<li class="masthead__menu-item">
              <a href="/about/">about</a>
            </li>
</ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <script lang="javascript" src="/assets/js/vanilla-back-to-top.min.js"></script>
    <script>addBackToTop({
      backgroundColor: '#6F777D',
      textColor: '#fff'
    })</script>

    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://josecastillolema.github.io/">
        <img src="/assets/images/me.jpg" alt="Jose Castillo Lema" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://josecastillolema.github.io/" itemprop="url">Jose Castillo Lema</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Software Engineer @ <strong>RedHat</strong></p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">Santiago, Spain</span>
        </li>
      

      
        
          
            <li><a href="https://github.com/josecastillolema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/jose-castillo-lema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
            <li><a href="https://www.youracclaim.com/users/jose-castillo-lema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-angle-double-up" aria-hidden="true"></i><span class="label">Acclaim</span></a></li>
          
        
          
            <li><a href="https://stackoverflow.com/users/4288758/jos%c3%a9-castillo-lema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">StackOverflow</span></a></li>
          
        
          
            <li><a href="https://www.researchgate.net/profile/Jose_Castillo-Lema" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-researchgate" aria-hidden="true"></i><span class="label">ResearchGate</span></a></li>
          
        
          
            <li><a href="https://scholar.google.com.br/citations?user=_xNpHiwAAAAJ" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-google" aria-hidden="true"></i><span class="label">GoogleScholar</span></a></li>
          
        
          
            <li><a href="https://www.opennetworking.org/ambassadors/jose-castillo-lema/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-battle-net" aria-hidden="true"></i><span class="label">ONF</span></a></li>
          
        
          
            <li><a href="https://www.youtube.com/channel/UCm5egt_lHxJX-VQdkLPszog/playlists" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-youtube-square" aria-hidden="true"></i><span class="label">YouTube</span></a></li>
          
        
          
            <li><a href="https://josecastillolema.github.io/feed.xml" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i><span class="label">RSS</span></a></li>
          
        
          
            <li><a href="mailto:josecastillolema@gmail.com" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="AWS series XII: DynamoDB">
    <meta itemprop="description" content="Serie de artigos sobre Amazon Web Services.">
    <meta itemprop="datePublished" content="2020-07-16T00:00:00-05:00">
    <meta itemprop="dateModified" content="2020-07-16T00:00:00-05:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://josecastillolema.github.io/aws12-dynamodb/" itemprop="url">AWS series XII: DynamoDB
</a>
          </h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          19 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title">
<i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li>
<a href="#lab-8---aws-dynamodb">Lab 8 - AWS DynamoDB</a><ul>
<li><a href="#pre-reqs">Pre-reqs</a></li>
<li><a href="#criando-o-db-no-dynamodb">Criando o DB no DynamoDB</a></li>
<li>
<a href="#accessando-via-c%C3%B3digo-python">Accessando via código python</a><ul>
<li><a href="#usando-o-arquivo-de-credenciais">Usando o arquivo de credenciais</a></li>
<li><a href="#usando-iam-roles-recomendado">Usando IAM roles (recomendado)</a></li>
</ul>
</li>
</ul>
</li></ul>
            </nav>
          </aside>
        
        <p><a href="/series/#aws">Serie de artigos</a> sobre Amazon Web Services.</p>

<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&repo=fiap&type=watch&count=true&size=large&v=2" frameborder="0" scrolling="0" width="132" height="30" title="GitHub"></iframe>
<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&repo=fiap&type=star&count=true&size=large" frameborder="0" scrolling="0" width="130" height="30" title="GitHub"></iframe>
<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&repo=fiap&type=fork&count=true&size=large" frameborder="0" scrolling="0" width="170" height="30" title="GitHub"></iframe>

<h1 id="lab-8---aws-dynamodb">Lab 8 - AWS DynamoDB</h1>

<p>Em este lab sobre <a href="https://aws.amazon.com/pt/dynamodb/"><strong>DynamoDB</strong></a> aprenderemos alguns conceitos importantes na criação de DBaaS NoSQL:</p>
<ul>
  <li>Criação de tabelas</li>
  <li>Inserção/consulta de dados via console</li>
  <li>Inserção/consulta via código <code class="language-plaintext highlighter-rouge">python</code>
</li>
</ul>

<p>Aproveitaremos para ver alguns conceitos importantes sobre <a href="https://aws.amazon.com/pt/iam/"><strong>Identity and Access Management (IAM)</strong></a>:</p>
<ul>
  <li>Autenticação usando arquivo de credenciais</li>
  <li>Autenticação usando roles</li>
</ul>

<p>Aproveitaremos também para mostrar as três formas de interação com a AWS:</p>
<ul>
  <li>Console WEB</li>
  <li>Command line (comando <code class="language-plaintext highlighter-rouge">aws</code>)</li>
  <li>SDK Python (biblioteca <code class="language-plaintext highlighter-rouge">python3-boto3</code>)</li>
</ul>

<h2 id="pre-reqs">Pre-reqs</h2>

<ul>
  <li>
    <p>Uma VM com a imagem <code class="language-plaintext highlighter-rouge">Amazon Linux</code></p>
  </li>
  <li>
    <p>No console da AWS Academy, accessar as credenciais da conta para acesso programático:
 <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/d1.png" alt=""></p>
  </li>
  <li>Copiar as credenciais no arquivo <code class="language-plaintext highlighter-rouge">~/.aws/credentials</code> dentro da VM:
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  $ cat ~/.aws/credentials 
  [default]
  aws_access_key_id=&lt;copy here&gt;
  aws_secret_access_key=&lt;copy here&gt;
  aws_session_token=&lt;copy here&gt;
</code></pre></div>    </div>
  </li>
  <li>Configuramos a região correta (ignorar o resto dos campos):
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ aws configure
 AWS Access Key ID [****************Q5QG]: 
 AWS Secret Access Key [****************aqWs]: 
 Default region name [None]: us-east-1
 Default output format [None]:
</code></pre></div>    </div>
  </li>
  <li>Listar VMs (em formato <code class="language-plaintext highlighter-rouge">json</code>):
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ aws ec2 describe-instances
 {
     "Reservations": [
         {
             "Groups": [],
             "Instances": [
                 {
                     "AmiLaunchIndex": 0,
                     "ImageId": "ami-0914bc04e5495b889",
                     "InstanceId": "i-0eea6b50a48d07613",
                     "InstanceType": "t2.micro",
                     "LaunchTime": "2020-09-18T00:17:13.000Z",
                     "Monitoring": {
                         "State": "disabled"
                     },
                     "Placement": {
                         "AvailabilityZone": "us-east-1c",
                         "GroupName": "",
                         "Tenancy": "default"
                     },
                     "PrivateDnsName": "",
                     "ProductCodes": [],
                     "PublicDnsName": "",
                     "State": {
                         "Code": 48,
                         "Name": "terminated"
                     },
                     "StateTransitionReason": "User initiated (2020-09-20 20:10:17 GMT)",
                     "Architecture": "x86_64",
                     "BlockDeviceMappings": [],
                     "ClientToken": "cb65d27a-49cb-d46d-a7ca-1b8368d22330",
                     "EbsOptimized": false,
                     "EnaSupport": true,
                     "Hypervisor": "xen",
                     "NetworkInterfaces": [],
                     "RootDeviceName": "/dev/xvda",
                     "RootDeviceType": "ebs",
                     "SecurityGroups": [],
                     "StateReason": {
                         "Code": "Client.UserInitiatedShutdown",
                         "Message": "Client.UserInitiatedShutdown: User initiated shutdown"
                     },
                     "Tags": [
                         {
                             "Key": "aws:cloudformation:stack-id",
                             "Value": "arn:aws:cloudformation:us-east-1:440730077537:stack/awseb-e-32fei49nnj-stack/35d81f30-f944-11ea-9cb6-0eb23bbe71c5"
                         },
                         {
                             "Key": "elasticbeanstalk:environment-id",
                             "Value": "e-32fei49nnj"
                         },
                         {
                             "Key": "Name",
                             "Value": "Fiapapp-env"
                         },
                         {
                             "Key": "aws:cloudformation:stack-name",
                             "Value": "awseb-e-32fei49nnj-stack"
                         },
                         {
                             "Key": "elasticbeanstalk:environment-name",
                             "Value": "Fiapapp-env"
                         },
                         {
                             "Key": "aws:autoscaling:groupName",
                             "Value": "awseb-e-32fei49nnj-stack-AWSEBAutoScalingGroup-17NY3APZ43NN7"
                         },
                         {
                             "Key": "aws:cloudformation:logical-id",
                             "Value": "AWSEBAutoScalingGroup"
                         }
                     ],
                     "VirtualizationType": "hvm",
                     "CpuOptions": {
                         "CoreCount": 1,
                         "ThreadsPerCore": 1
                     },
                     "CapacityReservationSpecification": {
                         "CapacityReservationPreference": "open"
                     },
                     "HibernationOptions": {
                         "Configured": false
                     },
                     "MetadataOptions": {
                         "State": "pending",
                         "HttpTokens": "optional",
                         "HttpPutResponseHopLimit": 1,
                         "HttpEndpoint": "enabled"
                     }
                 }
             ],
             "OwnerId": "440730077537",
             "RequesterId": "940372691376",
             "ReservationId": "r-04e5222922400810c"
         },
         {
             "Groups": [],
             "Instances": [
                 {
                     "AmiLaunchIndex": 0,
                     "ImageId": "ami-0817d428a6fb68645",
                     "InstanceId": "i-02a7e6dfe99d1f769",
                     "InstanceType": "t2.micro",
                     "KeyName": "fiap",
                     "LaunchTime": "2020-09-20T20:11:49.000Z",
                     "Monitoring": {
                         "State": "disabled"
                     },
                     "Placement": {
                         "AvailabilityZone": "us-east-1a",
                         "GroupName": "",
                         "Tenancy": "default"
                     },
                     "PrivateDnsName": "ip-172-31-40-37.ec2.internal",
                     "PrivateIpAddress": "172.31.40.37",
                     "ProductCodes": [],
                     "PublicDnsName": "ec2-18-232-70-66.compute-1.amazonaws.com",
                     "PublicIpAddress": "18.232.70.66",
                     "State": {
                         "Code": 16,
                         "Name": "running"
                     },
                     "StateTransitionReason": "",
                     "SubnetId": "subnet-17a00f48",
                     "VpcId": "vpc-7166990c",
                     "Architecture": "x86_64",
                     "BlockDeviceMappings": [
                         {
                             "DeviceName": "/dev/sda1",
                             "Ebs": {
                                 "AttachTime": "2020-09-20T20:11:49.000Z",
                                 "DeleteOnTermination": true,
                                 "Status": "attached",
                                 "VolumeId": "vol-0b8b82a6443e712cf"
                             }
                         }
                     ],
                     "ClientToken": "",
                     "EbsOptimized": false,
                     "EnaSupport": true,
                     "Hypervisor": "xen",
                     "NetworkInterfaces": [
                         {
                             "Association": {
                                 "IpOwnerId": "amazon",
                                 "PublicDnsName": "ec2-18-232-70-66.compute-1.amazonaws.com",
                                 "PublicIp": "18.232.70.66"
                             },
                             "Attachment": {
                                 "AttachTime": "2020-09-20T20:11:49.000Z",
                                 "AttachmentId": "eni-attach-00f1dc9a09492b219",
                                 "DeleteOnTermination": true,
                                 "DeviceIndex": 0,
                                 "Status": "attached"
                             },
                             "Description": "",
                             "Groups": [
                                 {
                                     "GroupName": "launch-wizard-3",
                                     "GroupId": "sg-0976be2478d3b8b08"
                                 }
                             ],
                             "Ipv6Addresses": [],
                             "MacAddress": "0e:6a:4f:ca:d5:f1",
                             "NetworkInterfaceId": "eni-09f8ba40f97bbc142",
                             "OwnerId": "440730077537",
                             "PrivateDnsName": "ip-172-31-40-37.ec2.internal",
                             "PrivateIpAddress": "172.31.40.37",
                             "PrivateIpAddresses": [
                                 {
                                     "Association": {
                                         "IpOwnerId": "amazon",
                                         "PublicDnsName": "ec2-18-232-70-66.compute-1.amazonaws.com",
                                         "PublicIp": "18.232.70.66"
                                     },
                                     "Primary": true,
                                     "PrivateDnsName": "ip-172-31-40-37.ec2.internal",
                                     "PrivateIpAddress": "172.31.40.37"
                                 }
                             ],
                             "SourceDestCheck": true,
                             "Status": "in-use",
                             "SubnetId": "subnet-17a00f48",
                             "VpcId": "vpc-7166990c",
                             "InterfaceType": "interface"
                         }
                     ],
                     "RootDeviceName": "/dev/sda1",
                     "RootDeviceType": "ebs",
                     "SecurityGroups": [
                         {
                             "GroupName": "launch-wizard-3",
                             "GroupId": "sg-0976be2478d3b8b08"
                         }
                     ],
                     "SourceDestCheck": true,
                     "VirtualizationType": "hvm",
                     "CpuOptions": {
                         "CoreCount": 1,
                         "ThreadsPerCore": 1
                     },
                     "CapacityReservationSpecification": {
                         "CapacityReservationPreference": "open"
                     },
                     "HibernationOptions": {
                         "Configured": false
                     },
                     "MetadataOptions": {
                         "State": "applied",
                         "HttpTokens": "optional",
                         "HttpPutResponseHopLimit": 1,
                         "HttpEndpoint": "enabled"
                     }
                 }
             ],
             "OwnerId": "440730077537",
             "ReservationId": "r-06e3113829e85cdc6"
         }
     ]
 }
</code></pre></div>    </div>
  </li>
  <li>Listar VMs (em formato tabela):
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ aws ec2 describe-instances --output table
 ------------------------------------------------------------------------------------------------------------------------------------------------------------------
 |                                                                        DescribeInstances                                                                       |
 +----------------------------------------------------------------------------------------------------------------------------------------------------------------+
 ||                                                                         Reservations                                                                         ||
 |+------------------------------------------------------------------+-------------------------------------------------------------------------------------------+|
 ||  OwnerId                                                         |  440730077537                                                                             ||
 ||  RequesterId                                                     |  940372691376                                                                             ||
 ||  ReservationId                                                   |  r-04e5222922400810c                                                                      ||
 |+------------------------------------------------------------------+-------------------------------------------------------------------------------------------+|
 |||                                                                          Instances                                                                         |||
 ||+-------------------------------------------------------+----------------------------------------------------------------------------------------------------+||
 |||  AmiLaunchIndex                                       |  0                                                                                                 |||
 |||  Architecture                                         |  x86_64                                                                                            |||
 |||  ClientToken                                          |  cb65d27a-49cb-d46d-a7ca-1b8368d22330                                                              |||
 |||  EbsOptimized                                         |  False                                                                                             |||
 |||  EnaSupport                                           |  True                                                                                              |||
 |||  Hypervisor                                           |  xen                                                                                               |||
 |||  ImageId                                              |  ami-0914bc04e5495b889                                                                             |||
 |||  InstanceId                                           |  i-0eea6b50a48d07613                                                                               |||
 |||  InstanceType                                         |  t2.micro                                                                                          |||
 |||  LaunchTime                                           |  2020-09-18T00:17:13.000Z                                                                          |||
 |||  PrivateDnsName                                       |                                                                                                    |||
 |||  PublicDnsName                                        |                                                                                                    |||
 |||  RootDeviceName                                       |  /dev/xvda                                                                                         |||
 |||  RootDeviceType                                       |  ebs                                                                                               |||
 |||  StateTransitionReason                                |  User initiated (2020-09-20 20:10:17 GMT)                                                          |||
 |||  VirtualizationType                                   |  hvm                                                                                               |||
 ||+-------------------------------------------------------+----------------------------------------------------------------------------------------------------+||
 ||||                                                             CapacityReservationSpecification                                                             ||||
 |||+----------------------------------------------------------------------------------------------------------------------------+-----------------------------+|||
 ||||  CapacityReservationPreference                                                                                             |  open                       ||||
 |||+----------------------------------------------------------------------------------------------------------------------------+-----------------------------+|||
 ||||                                                                        CpuOptions                                                                        ||||
 |||+------------------------------------------------------------------------------------------------------------------------+---------------------------------+|||
 ||||  CoreCount                                                                                                             |  1                              ||||
 ||||  ThreadsPerCore                                                                                                        |  1                              ||||
 |||+------------------------------------------------------------------------------------------------------------------------+---------------------------------+|||
 ||||                                                                    HibernationOptions                                                                    ||||
 |||+---------------------------------------------------------------------------------------------+------------------------------------------------------------+|||
 ||||  Configured                                                                                 |  False                                                     ||||
 |||+---------------------------------------------------------------------------------------------+------------------------------------------------------------+|||
 ||||                                                                      MetadataOptions                                                                     ||||
 |||+----------------------------------------------------------------------------------------------------------+-----------------------------------------------+|||
 ||||  HttpEndpoint                                                                                            |  enabled                                      ||||
 ||||  HttpPutResponseHopLimit                                                                                 |  1                                            ||||
 ||||  HttpTokens                                                                                              |  optional                                     ||||
 ||||  State                                                                                                   |  pending                                      ||||
 |||+----------------------------------------------------------------------------------------------------------+-----------------------------------------------+|||
 ||||                                                                        Monitoring                                                                        ||||
 |||+-----------------------------------------------------------------+----------------------------------------------------------------------------------------+|||
 ||||  State                                                          |  disabled                                                                              ||||
 |||+-----------------------------------------------------------------+----------------------------------------------------------------------------------------+|||
 ||||                                                                         Placement                                                                        ||||
 |||+------------------------------------------------------------------------------------------+---------------------------------------------------------------+|||
 ||||  AvailabilityZone                                                                        |  us-east-1c                                                   ||||
 ||||  GroupName                                                                               |                                                               ||||
 ||||  Tenancy                                                                                 |  default                                                      ||||
 |||+------------------------------------------------------------------------------------------+---------------------------------------------------------------+|||
 ||||                                                                           State                                                                          ||||
 |||+-------------------------------------------------------+--------------------------------------------------------------------------------------------------+|||
 ||||  Code                                                 |  48                                                                                              ||||
 ||||  Name                                                 |  terminated                                                                                      ||||
 |||+-------------------------------------------------------+--------------------------------------------------------------------------------------------------+|||
 ||||                                                                        StateReason                                                                       ||||
 |||+-----------------------+----------------------------------------------------------------------------------------------------------------------------------+|||
 ||||  Code                 |  Client.UserInitiatedShutdown                                                                                                    ||||
 ||||  Message              |  Client.UserInitiatedShutdown: User initiated shutdown                                                                           ||||
 |||+-----------------------+----------------------------------------------------------------------------------------------------------------------------------+|||
 ||||                                                                           Tags                                                                           ||||
 |||+-----------------------------------+----------------------------------------------------------------------------------------------------------------------+|||
 ||||                Key                |                                                        Value                                                         ||||
 |||+-----------------------------------+----------------------------------------------------------------------------------------------------------------------+|||
 ||||  aws:cloudformation:stack-id      |  arn:aws:cloudformation:us-east-1:440730077537:stack/awseb-e-32fei49nnj-stack/35d81f30-f944-11ea-9cb6-0eb23bbe71c5   ||||
 ||||  elasticbeanstalk:environment-id  |  e-32fei49nnj                                                                                                        ||||
 ||||  Name                             |  Fiapapp-env                                                                                                         ||||
 ||||  aws:cloudformation:stack-name    |  awseb-e-32fei49nnj-stack                                                                                            ||||
 ||||  elasticbeanstalk:environment-name|  Fiapapp-env                                                                                                         ||||
 ||||  aws:autoscaling:groupName        |  awseb-e-32fei49nnj-stack-AWSEBAutoScalingGroup-17NY3APZ43NN7                                                        ||||
 ||||  aws:cloudformation:logical-id    |  AWSEBAutoScalingGroup                                                                                               ||||
 |||+-----------------------------------+----------------------------------------------------------------------------------------------------------------------+|||
 ||                                                                         Reservations                                                                         ||
 |+------------------------------------------------------------------+-------------------------------------------------------------------------------------------+|
 ||  OwnerId                                                         |  440730077537                                                                             ||
 ||  RequesterId                                                     |                                                                                           ||
 ||  ReservationId                                                   |  r-06e3113829e85cdc6                                                                      ||
 |+------------------------------------------------------------------+-------------------------------------------------------------------------------------------+|
 |||                                                                          Instances                                                                         |||
 ||+-------------------------------------------------------+----------------------------------------------------------------------------------------------------+||
 |||  AmiLaunchIndex                                       |  0                                                                                                 |||
 |||  Architecture                                         |  x86_64                                                                                            |||
 |||  ClientToken                                          |                                                                                                    |||
 |||  EbsOptimized                                         |  False                                                                                             |||
 |||  EnaSupport                                           |  True                                                                                              |||
 |||  Hypervisor                                           |  xen                                                                                               |||
 |||  ImageId                                              |  ami-0817d428a6fb68645                                                                             |||
 |||  InstanceId                                           |  i-02a7e6dfe99d1f769                                                                               |||
 |||  InstanceType                                         |  t2.micro                                                                                          |||
 |||  KeyName                                              |  fiap                                                                                              |||
 |||  LaunchTime                                           |  2020-09-20T20:11:49.000Z                                                                          |||
 |||  PrivateDnsName                                       |  ip-172-31-40-37.ec2.internal                                                                      |||
 |||  PrivateIpAddress                                     |  172.31.40.37                                                                                      |||
 |||  PublicDnsName                                        |  ec2-18-232-70-66.compute-1.amazonaws.com                                                          |||
 |||  PublicIpAddress                                      |  18.232.70.66                                                                                      |||
 |||  RootDeviceName                                       |  /dev/sda1                                                                                         |||
 |||  RootDeviceType                                       |  ebs                                                                                               |||
 |||  SourceDestCheck                                      |  True                                                                                              |||
 |||  StateTransitionReason                                |                                                                                                    |||
 |||  SubnetId                                             |  subnet-17a00f48                                                                                   |||
 |||  VirtualizationType                                   |  hvm                                                                                               |||
 |||  VpcId                                                |  vpc-7166990c                                                                                      |||
 ||+-------------------------------------------------------+----------------------------------------------------------------------------------------------------+||
 ||||                                                                    BlockDeviceMappings                                                                   ||||
 |||+-------------------------------------------------------------------------------+--------------------------------------------------------------------------+|||
 ||||  DeviceName                                                                   |  /dev/sda1                                                               ||||
 |||+-------------------------------------------------------------------------------+--------------------------------------------------------------------------+|||
 |||||                                                                           Ebs                                                                          |||||
 ||||+-------------------------------------------------------------------+------------------------------------------------------------------------------------+||||
 |||||  AttachTime                                                       |  2020-09-20T20:11:49.000Z                                                          |||||
 |||||  DeleteOnTermination                                              |  True                                                                              |||||
 |||||  Status                                                           |  attached                                                                          |||||
 |||||  VolumeId                                                         |  vol-0b8b82a6443e712cf                                                             |||||
 ||||+-------------------------------------------------------------------+------------------------------------------------------------------------------------+||||
 ||||                                                             CapacityReservationSpecification                                                             ||||
 |||+----------------------------------------------------------------------------------------------------------------------------+-----------------------------+|||
 ||||  CapacityReservationPreference                                                                                             |  open                       ||||
 |||+----------------------------------------------------------------------------------------------------------------------------+-----------------------------+|||
 ||||                                                                        CpuOptions                                                                        ||||
 |||+------------------------------------------------------------------------------------------------------------------------+---------------------------------+|||
 ||||  CoreCount                                                                                                             |  1                              ||||
 ||||  ThreadsPerCore                                                                                                        |  1                              ||||
 |||+------------------------------------------------------------------------------------------------------------------------+---------------------------------+|||
 ||||                                                                    HibernationOptions                                                                    ||||
 |||+---------------------------------------------------------------------------------------------+------------------------------------------------------------+|||
 ||||  Configured                                                                                 |  False                                                     ||||
 |||+---------------------------------------------------------------------------------------------+------------------------------------------------------------+|||
 ||||                                                                      MetadataOptions                                                                     ||||
 |||+----------------------------------------------------------------------------------------------------------+-----------------------------------------------+|||
 ||||  HttpEndpoint                                                                                            |  enabled                                      ||||
 ||||  HttpPutResponseHopLimit                                                                                 |  1                                            ||||
 ||||  HttpTokens                                                                                              |  optional                                     ||||
 ||||  State                                                                                                   |  applied                                      ||||
 |||+----------------------------------------------------------------------------------------------------------+-----------------------------------------------+|||
 ||||                                                                        Monitoring                                                                        ||||
 |||+-----------------------------------------------------------------+----------------------------------------------------------------------------------------+|||
 ||||  State                                                          |  disabled                                                                              ||||
 |||+-----------------------------------------------------------------+----------------------------------------------------------------------------------------+|||
 ||||                                                                     NetworkInterfaces                                                                    ||||
 |||+--------------------------------------------------------------+-------------------------------------------------------------------------------------------+|||
 ||||  Description                                                 |                                                                                           ||||
 ||||  InterfaceType                                               |  interface                                                                                ||||
 ||||  MacAddress                                                  |  0e:6a:4f:ca:d5:f1                                                                        ||||
 ||||  NetworkInterfaceId                                          |  eni-09f8ba40f97bbc142                                                                    ||||
 ||||  OwnerId                                                     |  440730077537                                                                             ||||
 ||||  PrivateDnsName                                              |  ip-172-31-40-37.ec2.internal                                                             ||||
 ||||  PrivateIpAddress                                            |  172.31.40.37                                                                             ||||
 ||||  SourceDestCheck                                             |  True                                                                                     ||||
 ||||  Status                                                      |  in-use                                                                                   ||||
 ||||  SubnetId                                                    |  subnet-17a00f48                                                                          ||||
 ||||  VpcId                                                       |  vpc-7166990c                                                                             ||||
 |||+--------------------------------------------------------------+-------------------------------------------------------------------------------------------+|||
 |||||                                                                       Association                                                                      |||||
 ||||+-----------------------------------------+--------------------------------------------------------------------------------------------------------------+||||
 |||||  IpOwnerId                              |  amazon                                                                                                      |||||
 |||||  PublicDnsName                          |  ec2-18-232-70-66.compute-1.amazonaws.com                                                                    |||||
 |||||  PublicIp                               |  18.232.70.66                                                                                                |||||
 ||||+-----------------------------------------+--------------------------------------------------------------------------------------------------------------+||||
 |||||                                                                       Attachment                                                                       |||||
 ||||+--------------------------------------------------------------+-----------------------------------------------------------------------------------------+||||
 |||||  AttachTime                                                  |  2020-09-20T20:11:49.000Z                                                               |||||
 |||||  AttachmentId                                                |  eni-attach-00f1dc9a09492b219                                                           |||||
 |||||  DeleteOnTermination                                         |  True                                                                                   |||||
 |||||  DeviceIndex                                                 |  0                                                                                      |||||
 |||||  Status                                                      |  attached                                                                               |||||
 ||||+--------------------------------------------------------------+-----------------------------------------------------------------------------------------+||||
 |||||                                                                         Groups                                                                         |||||
 ||||+----------------------------------------------------+---------------------------------------------------------------------------------------------------+||||
 |||||  GroupId                                           |  sg-0976be2478d3b8b08                                                                             |||||
 |||||  GroupName                                         |  launch-wizard-3                                                                                  |||||
 ||||+----------------------------------------------------+---------------------------------------------------------------------------------------------------+||||
 |||||                                                                   PrivateIpAddresses                                                                   |||||
 ||||+---------------------------------------------------------+----------------------------------------------------------------------------------------------+||||
 |||||  Primary                                                |  True                                                                                        |||||
 |||||  PrivateDnsName                                         |  ip-172-31-40-37.ec2.internal                                                                |||||
 |||||  PrivateIpAddress                                       |  172.31.40.37                                                                                |||||
 ||||+---------------------------------------------------------+----------------------------------------------------------------------------------------------+||||
 ||||||                                                                      Association                                                                     ||||||
 |||||+----------------------------------------+-------------------------------------------------------------------------------------------------------------+|||||
 ||||||  IpOwnerId                             |  amazon                                                                                                     ||||||
 ||||||  PublicDnsName                         |  ec2-18-232-70-66.compute-1.amazonaws.com                                                                   ||||||
 ||||||  PublicIp                              |  18.232.70.66                                                                                               ||||||
 |||||+----------------------------------------+-------------------------------------------------------------------------------------------------------------+|||||
 ||||                                                                         Placement                                                                        ||||
 |||+------------------------------------------------------------------------------------------+---------------------------------------------------------------+|||
 ||||  AvailabilityZone                                                                        |  us-east-1a                                                   ||||
 ||||  GroupName                                                                               |                                                               ||||
 ||||  Tenancy                                                                                 |  default                                                      ||||
 |||+------------------------------------------------------------------------------------------+---------------------------------------------------------------+|||
 ||||                                                                      SecurityGroups                                                                      ||||
 |||+-----------------------------------------------------+----------------------------------------------------------------------------------------------------+|||
 ||||  GroupId                                            |  sg-0976be2478d3b8b08                                                                              ||||
 ||||  GroupName                                          |  launch-wizard-3                                                                                   ||||
 |||+-----------------------------------------------------+----------------------------------------------------------------------------------------------------+|||
 ||||                                                                           State                                                                          ||||
 |||+----------------------------------------------------------------+-----------------------------------------------------------------------------------------+|||
 ||||  Code                                                          |  16                                                                                     ||||
 ||||  Name                                                          |  running                                                                                ||||
 |||+----------------------------------------------------------------+-----------------------------------------------------------------------------------------+|||
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="criando-o-db-no-dynamodb">Criando o DB no DynamoDB</h2>

<ol>
  <li>
    <p>Acessar o serviço <strong>DynamoDB</strong></p>
  </li>
  <li>
    <p>Criar uma nova tabela:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/d2.png" alt=""></p>
  </li>
  <li>
    <p>Configurar o nome da tabela e a chave primaria da mesma:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/d3.png" alt=""></p>
  </li>
  <li>
    <p>Aguardar a criação da tabela:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/d4.png" alt=""></p>
  </li>
  <li>
    <p>Na aba <code class="language-plaintext highlighter-rouge">Items</code>, adicionar um novo item:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/d5.png" alt=""></p>

    <p><img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/d5_2.png" alt=""></p>
  </li>
  <li>
    <p>Confirmar a criação do item:
<img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/d6.png" alt=""></p>
  </li>
</ol>

<h2 id="accessando-via-código-python">Accessando via código <code class="language-plaintext highlighter-rouge">python</code>
</h2>

<h3 id="usando-o-arquivo-de-credenciais">Usando o arquivo de credenciais</h3>

<ol>
  <li>Na VM, instalar o <code class="language-plaintext highlighter-rouge">git</code>:
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ sudo yum install -y git
</code></pre></div>    </div>
  </li>
  <li>Clonar o repostiorio das aulas:
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ git clone https://github.com/josecastillolema/fiap.git
</code></pre></div>    </div>
  </li>
  <li>Navegar ate a pasta dos códigos de este lab:
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> $ cd fiap/shift/multicloud/lab08-paas-dynamo/
</code></pre></div>    </div>
  </li>
  <li>Conferir o código:
    <ul>
      <li>Carrega a tabela <code class="language-plaintext highlighter-rouge">Alunos</code> da <em>region</em> <code class="language-plaintext highlighter-rouge">us-east-1</code>
</li>
      <li>Faz um <em>scan</em> de todos os dados da tabela</li>
      <li>Insere um novo aluno</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">import</span> <span class="nn">boto3</span>

<span class="n">dynamodb</span> <span class="o">=</span> <span class="n">boto3</span><span class="p">.</span><span class="n">resource</span><span class="p">(</span><span class="s">'dynamodb'</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s">'us-east-1'</span><span class="p">)</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="p">.</span><span class="n">Table</span><span class="p">(</span><span class="s">'Alunos'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">scan</span><span class="p">(</span><span class="n">dynamodb</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
   <span class="n">response</span> <span class="o">=</span> <span class="n">table</span><span class="p">.</span><span class="n">scan</span><span class="p">()</span>
   <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s">'Items'</span><span class="p">]</span>
   <span class="k">while</span> <span class="s">'LastEvaluatedKey'</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
      <span class="n">response</span> <span class="o">=</span> <span class="n">table</span><span class="p">.</span><span class="n">scan</span><span class="p">(</span><span class="n">ExclusiveStartKey</span><span class="o">=</span><span class="n">response</span><span class="p">[</span><span class="s">'LastEvaluatedKey'</span><span class="p">])</span>
      <span class="n">data</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s">'Items'</span><span class="p">])</span>
   <span class="k">print</span> <span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">put_aluno</span><span class="p">(</span><span class="n">dynamodb</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">rm</span><span class="p">,</span> <span class="n">mail</span><span class="p">,</span> <span class="n">nome</span><span class="p">,</span> <span class="n">tlfne</span><span class="p">):</span>
   <span class="n">response</span> <span class="o">=</span> <span class="n">table</span><span class="p">.</span><span class="n">put_item</span><span class="p">(</span>
      <span class="n">Item</span><span class="o">=</span><span class="p">{</span>
         <span class="s">'RM'</span><span class="p">:</span> <span class="n">rm</span><span class="p">,</span>
         <span class="s">'mail'</span><span class="p">:</span> <span class="n">mail</span><span class="p">,</span>
         <span class="s">'nome'</span><span class="p">:</span> <span class="n">nome</span><span class="p">,</span>
         <span class="s">'tfne'</span><span class="p">:</span> <span class="n">tlfne</span>
      <span class="p">}</span>
   <span class="p">)</span>
   <span class="k">return</span> <span class="n">response</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
   <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">Testando scan:"</span><span class="p">)</span>
   <span class="n">scan</span><span class="p">(</span><span class="n">dynamodb</span><span class="p">,</span> <span class="n">table</span><span class="p">)</span>

   <span class="n">resp</span> <span class="o">=</span> <span class="n">put_aluno</span><span class="p">(</span><span class="n">dynamodb</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="s">"RM234472"</span><span class="p">,</span> <span class="s">'rm234472@fiap.com.br'</span><span class="p">,</span> <span class="s">"Jonas Kahnwald"</span><span class="p">,</span> <span class="mi">11636229987</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">Iserindo aluno:"</span><span class="p">)</span>
   <span class="n">pprint</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>Instalar as dependências:
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>$ pip3 install boto3
</code></pre></div>    </div>
  </li>
  <li>Rodar o código:
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>$ python3 dynamodb.py 

 Testando scan:
 [{'mail': 'rm234472@fiap.com.br', 'nome': 'Jonas Kahnwald', 'RM': 'RM234472', 'tlfne': Decimal('11636229987')}, {'mail': 'rm338132@fiap.com.br', 'nome': 'Joao Lopez', 'RM': 'RM338132', 'tfne': Decimal('11981041293')}]

 Iserindo aluno:
 {'ResponseMetadata': {'HTTPHeaders': {'connection': 'keep-alive',
                                       'content-length': '2',
                                       'content-type': 'application/x-amz-json-1.0',
                                       'date': 'Thu, 30 Jul 2020 17:41:36 GMT',
                                       'server': 'Server',
                                       'x-amz-crc32': '2745614147',
                                       'x-amzn-requestid': 'KDPGDR3S23O19GMPMPOPHCNEO3VV4KQNSO5AEMVJF66Q9ASUAAJG'},
                       'HTTPStatusCode': 200,
                       'RequestId': 'KDPGDR3S23O19GMPMPOPHCNEO3VV4KQNSO5AEMVJF66Q9ASUAAJG',
                       'RetryAttempts': 0}}
</code></pre></div>    </div>
  </li>
  <li>No console do DynamoDB, conferir que o novo aluno foi inserido:
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/d7.png" alt="">
</li>
</ol>

<h3 id="usando-iam-roles-recomendado">Usando IAM <em>roles</em> (recomendado)</h3>

<ol>
  <li>Remover o arquivo de credenciais:
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>$ rm -rf ~/.aws
</code></pre></div>    </div>
  </li>
  <li>Tentar rodar de novo o código (deberia falhar, pois não estamos mais autenticados):
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>$ python3 dynamodb.py 

Testando scan:
Traceback (most recent call last):
  File "dynamodb2.py", line 28, in &lt;module&gt;
    scan(dynamodb, table)
  File "dynamodb2.py", line 8, in scan
    response = table.scan()
  File "/usr/lib/python3/dist-packages/boto3/resources/factory.py", line 520, in do_action
    response = action(self, *args, **kwargs)
  File "/usr/lib/python3/dist-packages/boto3/resources/action.py", line 83, in __call__
    response = getattr(parent.meta.client, operation_name)(**params)
  File "/usr/lib/python3/dist-packages/botocore/client.py", line 316, in _api_call
    return self._make_api_call(operation_name, kwargs)
  File "/usr/lib/python3/dist-packages/botocore/client.py", line 622, in _make_api_call
    operation_model, request_dict, request_context)
  File "/usr/lib/python3/dist-packages/botocore/client.py", line 641, in _make_request
    return self._endpoint.make_request(operation_model, request_dict)
  File "/usr/lib/python3/dist-packages/botocore/endpoint.py", line 102, in make_request
    return self._send_request(request_dict, operation_model)
  File "/usr/lib/python3/dist-packages/botocore/endpoint.py", line 132, in _send_request
    request = self.create_request(request_dict, operation_model)
  File "/usr/lib/python3/dist-packages/botocore/endpoint.py", line 116, in create_request
    operation_name=operation_model.name)
  File "/usr/lib/python3/dist-packages/botocore/hooks.py", line 356, in emit
    return self._emitter.emit(aliased_event_name, **kwargs)
  File "/usr/lib/python3/dist-packages/botocore/hooks.py", line 228, in emit
    return self._emit(event_name, kwargs)
  File "/usr/lib/python3/dist-packages/botocore/hooks.py", line 211, in _emit
    response = handler(**kwargs)
  File "/usr/lib/python3/dist-packages/botocore/signers.py", line 90, in handler
    return self.sign(operation_name, request)
  File "/usr/lib/python3/dist-packages/botocore/signers.py", line 160, in sign
    auth.add_auth(request)
  File "/usr/lib/python3/dist-packages/botocore/auth.py", line 357, in add_auth
    raise NoCredentialsError
botocore.exceptions.NoCredentialsError: Unable to locate credentials
</code></pre></div>    </div>
  </li>
  <li>Nas <strong>contas da AWS Academy</strong>, basta nexar o <em>role</em> <code class="language-plaintext highlighter-rouge">LabInstanceProfile</code> na VM e rodar de novo o código (deberia funcionar):
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/iam7.png" alt="">
</li>
</ol>

<p><img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/iam9.png" alt=""></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
$ python3 dynamodb.py 

Testando scan:
[{'mail': 'rm234472@fiap.com.br', 'nome': 'Jonas Kahnwald', 'RM': 'RM234472', 'tfne': Decimal('11636229987')}, {'mail': 'rm338132@fiap.com.br', 'nome': 'Joao Lopez', 'RM': 'RM338132', 'tfne': Decimal('11981041293')}]

Iserindo aluno:
{'ResponseMetadata': {'HTTPHeaders': {'connection': 'keep-alive',
                                      'content-length': '2',
                                      'content-type': 'application/x-amz-json-1.0',
                                      'date': 'Wed, 05 Aug 2020 08:39:34 GMT',
                                      'server': 'Server',
                                      'x-amz-crc32': '2745614147',
                                      'x-amzn-requestid': 'ESPGDHO1356RNOVANUH18ASV6NVV4KQNSO5AEMVJF66Q9ASUAAJG'},
                      'HTTPStatusCode': 200,
                      'RequestId': 'ESPGDHO1356RNOVANUH18ASV6NVV4KQNSO5AEMVJF66Q9ASUAAJG',
                      'RetryAttempts': 0}}
 ```
</code></pre></div></div>

<ol>
  <li>
    <p>Nas <strong>contas “normais” da AWS</strong> seguir os seguintes passos. Acessar o serviço <strong>IAM</strong>
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/iam0.png" alt=""></p>
  </li>
  <li>
    <p>Criar um novo <em>role</em>:
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/iam1.png" alt=""></p>
  </li>
  <li>
    <p>Escolher EC2 como serviço que vai utilizar o novo <em>role</em>:
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/iam2.png" alt=""></p>
  </li>
  <li>
    <p>Anexar a <em>policy</em> <code class="language-plaintext highlighter-rouge">AmazonDynamoDBFullAccess</code> no novo <em>role</em>:
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/iam3.png" alt=""></p>
  </li>
  <li>
    <p>Configurar <em>tags</em>:
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/iam4.png" alt=""></p>
  </li>
  <li>
    <p>Revisar as configurações e confirmar a criação do <em>role</em>:
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/iam5.png" alt=""></p>
  </li>
</ol>

<p><img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/iam6.png" alt=""></p>

<ol>
  <li>
    <p>No console do EC2, anexar o novo <em>role</em> na VM:
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/iam7.png" alt=""></p>
  </li>
  <li>
    <p>Seleccionar o <em>role</em> que acabamos de criar:
   <img src="https://raw.githubusercontent.com/josecastillolema/fiap/master/shift/multicloud/img/iam8.png" alt=""></p>
  </li>
  <li>
    <p>Tentar rodar de novo o código (deberia funcionar):</p>
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>$ python3 dynamodb.py 

Testando scan:
[{'mail': 'rm234472@fiap.com.br', 'nome': 'Jonas Kahnwald', 'RM': 'RM234472', 'tfne': Decimal('11636229987')}, {'mail': 'rm338132@fiap.com.br', 'nome': 'Joao Lopez', 'RM': 'RM338132', 'tfne': Decimal('11981041293')}]

Iserindo aluno:
{'ResponseMetadata': {'HTTPHeaders': {'connection': 'keep-alive',
                                      'content-length': '2',
                                      'content-type': 'application/x-amz-json-1.0',
                                      'date': 'Wed, 05 Aug 2020 08:39:34 GMT',
                                      'server': 'Server',
                                      'x-amz-crc32': '2745614147',
                                      'x-amzn-requestid': 'ESPGDHO1356RNOVANUH18ASV6NVV4KQNSO5AEMVJF66Q9ASUAAJG'},
                      'HTTPStatusCode': 200,
                      'RequestId': 'ESPGDHO1356RNOVANUH18ASV6NVV4KQNSO5AEMVJF66Q9ASUAAJG',
                      'RetryAttempts': 0}}
</code></pre></div>    </div>
  </li>
</ol>

<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&type=follow&count=true&size=large" frameborder="0" scrolling="0" width="230" height="30" title="GitHub"></iframe>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#aws" class="page__taxonomy-item p-category" rel="tag">aws</a><span class="sep">, </span>
    
      <a href="/tags/#classes" class="page__taxonomy-item p-category" rel="tag">classes</a><span class="sep">, </span>
    
      <a href="/tags/#dev" class="page__taxonomy-item p-category" rel="tag">dev</a><span class="sep">, </span>
    
      <a href="/tags/#fiap" class="page__taxonomy-item p-category" rel="tag">fiap</a><span class="sep">, </span>
    
      <a href="/tags/#pt" class="page__taxonomy-item p-category" rel="tag">pt</a><span class="sep">, </span>
    
      <a href="/tags/#series" class="page__taxonomy-item p-category" rel="tag">series</a>
    
    </span>
  </p>




        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2020-07-16">July 16, 2020</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?text=AWS+series+XII%3A+DynamoDB%20https%3A%2F%2Fjosecastillolema.github.io%2Faws12-dynamodb%2F" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fjosecastillolema.github.io%2Faws12-dynamodb%2F" class="btn btn--facebook" aria-label="Share on Facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook">
    <i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://josecastillolema.github.io/aws12-dynamodb/" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

  <a href="https://bsky.app/intent/compose?text=AWS+series+XII%3A+DynamoDB%20https%3A%2F%2Fjosecastillolema.github.io%2Faws12-dynamodb%2F" class="btn btn--bluesky" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Bluesky">
    <i class="fab fa-fw fa-bluesky" aria-hidden="true"></i><span> Bluesky</span>
  </a>
</section>


      
  <nav class="pagination">
    
      <a href="/aws8-eb-springboot/" class="pagination--pager" title="AWS series VIII: Elastic Beanstalk (EB) com Spring Boot">Previous</a>
    
    
      <a href="/aws9-cp/" class="pagination--pager" title="AWS series IX: CodePipeline">Next</a>
    
  </nav>


    </div>

    
      
        <div class="page__comments">
  
  
      <h4 class="page__comments-title">Comments</h4>
      <section id="disqus_thread"></section>
    
</div>

      
    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You May Also Enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/favicon_io/android-chrome-512x512.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/icpe25/" rel="permalink">ICPE 2025
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">ICPE ‘25: Proceedings of the 16th ACM/SPEC International Conference on Performance Engineering

</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/favicon_io/android-chrome-512x512.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/rh-summit25/" rel="permalink">Red Hat Summit 2025
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">I will be speaking at Red Hat Summit 2025 in Boston on May 19-22. Explore the latest in AI, Security, DevEx, Platform Engineering with industry leaders.

</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/favicon_io/android-chrome-512x512.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/codethedream25/" rel="permalink">Code the Dream Skill-IT workshops
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Code the Dream thanks José Castillo Lema of Red Hat for being our featured employer speaker for this week’s Skill-IT 🍳!

</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/favicon_io/android-chrome-512x512.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/lf-backstage/" rel="permalink">Introduction to Backstage - Developer Portals Made Easy (LFS142)
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">

</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap">
<form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term...">
  </form>
  <div id="results" class="results"></div>
</div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/josecastillolema" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/jose-castillo-lema" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
        
          <li><a href="https://stackoverflow.com/users/4288758/jos%c3%a9-castillo-lema" rel="nofollow noopener noreferrer"><i class="fab fa-stack-overflow" aria-hidden="true"></i> Stack Overflow</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">© 2025 <a href="https://josecastillolema.github.io">GitOps</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/jekyll-themes/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'G-1EBHNQEGXG']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://josecastillolema.github.io/aws12-dynamodb/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/aws12-dynamodb"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://https-josecastillolema-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>


  





  </body>
</html>
